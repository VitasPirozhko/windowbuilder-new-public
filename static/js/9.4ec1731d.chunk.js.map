{"version":3,"sources":["components/App/DataObjPage.js"],"names":["DataObjPage","prompt","loc","cell","pathname","match","this","handlers","props","_mgr","form_obj","ref","params","bind_pwnd","hide_header","set_text","title","handleIfaceState","component","name","value","close","dialog","Dialog","Component","key","when","message","el","owner","DhtmlxCell","rname","withIface"],"mappings":"+NAQMA,E,4MA+BJC,OAAS,SAACC,GAAS,IACVD,EAAU,EAAKE,KAAfF,OACP,QAAIA,IAAUC,EAAIE,SAASC,MAAM,aAG1BJ,EAAOC,I,kEAjCd,0EADkB,IAEXC,EAAyBG,KAAzBH,KAAMI,EAAmBD,KAAnBC,SAAUC,EAASF,KAATE,MACvBA,EAAMC,KAAKC,SAASP,EAAM,CACxBQ,IAAKH,EAAMH,MAAMO,OAAOD,IACxBE,WAAW,EACXC,aAAa,EACbC,SAJwB,SAIfC,GACPT,EAASC,MAAMQ,OAASA,GAAST,EAASU,iBAAiB,CACzDC,UAAW,GACXC,KAAM,QACNC,MAAOJ,MAGVT,K,6CAGkB,IAEdJ,EAAQG,KAARH,KACPA,GAAQA,EAAKkB,OAASlB,EAAKkB,QAC3B,+E,+BAgBQ,IAAD,SACiBf,KAAKE,MAAtBH,EADA,EACAA,MAAOiB,EADP,EACOA,OACRC,EAASD,GAAUjB,EAAMO,OAAOD,MAAQW,EAAOX,KAAOW,EAAOE,UACnE,MAAO,CACL,kBAAC,SAAD,CAAQC,IAAI,SAASC,MAAI,EAACC,QAASrB,KAAKL,SAExC,yBAAKwB,IAAI,KAAKd,IAAK,SAAAiB,GAAE,OAAI,EAAKA,GAAKA,KAEnCL,GAAU,kBAACA,EAAD,CAAQE,IAAI,SAASlB,SAAUD,KAAKC,SAAUe,OAAQA,EAAQO,MAAOvB,Y,GA/C3DwB,KAqD1B9B,EAAY+B,MAAQ,cAELC,8BAAUhC","file":"static/js/9.4ec1731d.chunk.js","sourcesContent":["import React from 'react';\r\n// import PropTypes from 'prop-types';\r\nimport DhtmlxCell from '../DhtmlxCell';\r\n\r\nimport {withIface} from 'metadata-redux';\r\n\r\nimport {Prompt} from 'react-router-dom';\r\n\r\nclass DataObjPage extends DhtmlxCell {\r\n\r\n  componentDidMount() {\r\n    super.componentDidMount();\r\n    const {cell, handlers, props} = this;\r\n    props._mgr.form_obj(cell, {\r\n      ref: props.match.params.ref,\r\n      bind_pwnd: true,\r\n      hide_header: true,\r\n      set_text(title) {\r\n        handlers.props.title != title && handlers.handleIfaceState({\r\n          component: '',\r\n          name: 'title',\r\n          value: title,\r\n        });\r\n      },\r\n    }, handlers);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    //$p.off('hash_route', this.hash_route);\r\n    const {cell} = this;\r\n    cell && cell.close && cell.close();\r\n    super.componentWillUnmount();\r\n  }\r\n\r\n  /**\r\n   * проверка, можно ли покидать страницу\r\n   * @param loc\r\n   * @return {*}\r\n   */\r\n  prompt = (loc) => {\r\n    const {prompt} = this.cell;\r\n    if(!prompt || loc.pathname.match(/builder/)){\r\n      return true;\r\n    }\r\n    return prompt(loc);\r\n  }\r\n\r\n  render() {\r\n    const {match, dialog} = this.props;\r\n    const Dialog = dialog && match.params.ref === dialog.ref && dialog.Component;\r\n    return [\r\n      <Prompt key=\"prompt\" when message={this.prompt} />,\r\n\r\n      <div key=\"el\" ref={el => this.el = el}/>,\r\n\r\n      Dialog && <Dialog key=\"dialog\" handlers={this.handlers} dialog={dialog} owner={this} />\r\n    ];\r\n  }\r\n\r\n}\r\n\r\nDataObjPage.rname = 'DataObjPage';\r\n\r\nexport default withIface(DataObjPage);\r\n\r\n\r\n"],"sourceRoot":""}