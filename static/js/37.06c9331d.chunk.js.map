{"version":3,"sources":["components/App/DataObjPage.js"],"names":["DataObjPage","DhtmlxCell","prompt","loc","this","cell","pathname","match","componentDidMount","super","handlers","props","_mgr","form_obj","ref","params","bind_pwnd","hide_header","set_text","title","handleIfaceState","component","name","value","componentWillUnmount","close","render","dialog","Dialog","Component","key","when","message","el","owner","rname","withIface"],"mappings":"kHAAA,oDAQA,MAAMA,UAAoBC,IAAY,eAAD,oBA+BnCC,OAAUC,IACR,MAAM,OAACD,GAAUE,KAAKC,KACtB,QAAIH,IAAUC,EAAIG,SAASC,MAAM,aAG1BL,EAAOC,IAlChBK,oBACEC,MAAMD,oBACN,MAAM,KAACH,EAAD,SAAOK,EAAP,MAAiBC,GAASP,KAChCO,EAAMC,KAAKC,SAASR,EAAM,CACxBS,IAAKH,EAAMJ,MAAMQ,OAAOD,IACxBE,WAAW,EACXC,aAAa,EACbC,SAASC,GACPT,EAASC,MAAMQ,OAASA,GAAST,EAASU,iBAAiB,CACzDC,UAAW,GACXC,KAAM,QACNC,MAAOJ,MAGVT,GAGLc,uBAEE,MAAM,KAACnB,GAAQD,KACfC,GAAQA,EAAKoB,OAASpB,EAAKoB,QAC3BhB,MAAMe,uBAgBRE,SACE,MAAM,MAACnB,EAAD,OAAQoB,GAAUvB,KAAKO,MACvBiB,EAASD,GAAUpB,EAAMQ,OAAOD,MAAQa,EAAOb,KAAOa,EAAOE,UACnE,MAAO,CACL,kBAAC,SAAD,CAAQC,IAAI,SAASC,MAAI,EAACC,QAAS5B,KAAKF,SAExC,yBAAK4B,IAAI,KAAKhB,IAAKmB,GAAM7B,KAAK6B,GAAKA,IAEnCL,GAAU,kBAACA,EAAD,CAAQE,IAAI,SAASpB,SAAUN,KAAKM,SAAUiB,OAAQA,EAAQO,MAAO9B,SAMrFJ,EAAYmC,MAAQ,cAELC,8BAAUpC","file":"static/js/37.06c9331d.chunk.js","sourcesContent":["import React from 'react';\r\n// import PropTypes from 'prop-types';\r\nimport DhtmlxCell from '../DhtmlxCell';\r\n\r\nimport {withIface} from 'metadata-redux';\r\n\r\nimport {Prompt} from 'react-router-dom';\r\n\r\nclass DataObjPage extends DhtmlxCell {\r\n\r\n  componentDidMount() {\r\n    super.componentDidMount();\r\n    const {cell, handlers, props} = this;\r\n    props._mgr.form_obj(cell, {\r\n      ref: props.match.params.ref,\r\n      bind_pwnd: true,\r\n      hide_header: true,\r\n      set_text(title) {\r\n        handlers.props.title != title && handlers.handleIfaceState({\r\n          component: '',\r\n          name: 'title',\r\n          value: title,\r\n        });\r\n      },\r\n    }, handlers);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    //$p.off('hash_route', this.hash_route);\r\n    const {cell} = this;\r\n    cell && cell.close && cell.close();\r\n    super.componentWillUnmount();\r\n  }\r\n\r\n  /**\r\n   * проверка, можно ли покидать страницу\r\n   * @param loc\r\n   * @return {*}\r\n   */\r\n  prompt = (loc) => {\r\n    const {prompt} = this.cell;\r\n    if(!prompt || loc.pathname.match(/builder/)){\r\n      return true;\r\n    }\r\n    return prompt(loc);\r\n  }\r\n\r\n  render() {\r\n    const {match, dialog} = this.props;\r\n    const Dialog = dialog && match.params.ref === dialog.ref && dialog.Component;\r\n    return [\r\n      <Prompt key=\"prompt\" when message={this.prompt} />,\r\n\r\n      <div key=\"el\" ref={el => this.el = el}/>,\r\n\r\n      Dialog && <Dialog key=\"dialog\" handlers={this.handlers} dialog={dialog} owner={this} />\r\n    ];\r\n  }\r\n\r\n}\r\n\r\nDataObjPage.rname = 'DataObjPage';\r\n\r\nexport default withIface(DataObjPage);\r\n\r\n\r\n"],"sourceRoot":""}