{"version":3,"sources":["../node_modules/@material-ui/icons/ChevronLeft.js","../node_modules/metadata-react/DynList/MenuPrint.js","../node_modules/@material-ui/icons/AttachFile.js","../node_modules/@material-ui/icons/Delete.js","../node_modules/metadata-react/DataField/FieldSelectStatic.js","../node_modules/metadata-react/FrmAttachments/AttachmentsToolbar.js","../node_modules/metadata-react/FrmAttachments/AttachmentsList.js","../node_modules/metadata-react/FrmAttachments/Attachments.js","../node_modules/metadata-react/FrmAttachments/index.js","../node_modules/metadata-react/FrmObj/DataObj.js","../node_modules/metadata-react/FrmObj/DataObjToolbar.js","../node_modules/@material-ui/icons/CheckCircleOutline.js","../node_modules/@material-ui/icons/CloudUpload.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","default","_react","_default","createElement","d","SubMenu","React","Component","constructor","args","super","this","state","anchorEl","handleOpen","event","setState","currentTarget","handleClose","render","props","items","Icon","text","handlePrint","prefix","variant","IconButton","key","onClick","MenuItem","ListItemIcon","Menu","open","Boolean","anchorOrigin","vertical","horizontal","transformOrigin","onClose","map","v","ref","name","MenuPrint","plates","componentDidMount","_mgr","scheme","child_meta","printing_plates","then","groups","Map","plate","group","includes","substr","indexOf","trim","get","set","push","forEach","length","PrintIcon","index","ChevronLeft","propTypes","_extends","assign","target","i","arguments","source","prototype","hasOwnProperty","call","apply","FieldSelectStatic","AbstractField","_obj","_fld","options","classes","extClasses","fullWidth","label_position","bar","className","_meta","onChange","attr","title","tooltip","synonym","valueOf","FormControl","control","cn","formControl","barInput","InputLabel","label","Select","native","input","Input","required","toString","withStyles","AttachmentsToolbar","Toolbar","disableGutters","toolbar","short","handleAdd","UploadIcon","handleDownload","DownloadIcon","handleDelete","RemoveIcon","Typography","color","flex","closeButton","CloseIcon","AttachmentsList","list","_attachments","att","menuItem","handleSelect","onDoubleClick","Avatar","avatar","lastIndexOf","ListItemText","inset","primary","secondary","round","content_type","MenuList","theme","margin","backgroundColor","palette","main","common","white","icon","Attachments","MDNRComponent","context","fileChange","files","res","utils","job_prm","msg","$p","mime_lookup","Promise","resolve","module","file","size","attachment_max_size","Error","file_size","save_attachment","load","forceUpdate","catch","err","dialog","file_download","message","click","file_select","handleDeleteFinish","delete_attachment","handleCloseDialog","url","_manager","pouch_db","class_name","window","tbProps","dnr","listProps","el","type","multiple","style","display","Dialog","actions","Button","LoadingMessage","PropTypes","object","_acl","string","match","read_only","func","handleIfaceState","renderItems","customComponents","item","Array","isArray","element","fld","light","cond_value","is_folder","DataField","fields","FieldSelect","FormGroup","spaceLeft","Divider","height","TabularSection","_tabular","AppBar","position","Tabs","handleValueChange","Tab","undefined","Cmp","DataObj","model","print","handleError","onDataChange","obj","is_tabular","_owner","shouldComponentUpdate","_handlers","handleSave","bind","handlePost","handleMarkDeleted","handleAttachments","handleCloseAttachments","handleSaveClose","metadata","params","num","by_num","load_linked_refs","on","update","mixin","rows","componentWillUnmount","off","is_new","unload","post","save","component","presentation","reason","handlers","base","handleNavigate","old_value","renderFields","elements","struct","exclude","DocObj","row","CatObj","code_length","main_presentation_name","has_owners","hierarchical","renderTabularSections","ts","tabular_sections","keys","ltitle","obj_presentation","_modified","DataObjToolbar","denyDel","readOnly","toolbar_props","posted","deleted","postable","deletable","form","noSpace","FrmAttachments","marginBottom","bool","isRequired","handleClick","handleRequestClose","showMenu","SaveIcon","SendIcon","buttons","MoreVertIcon","AttachIcon","menu_buttons"],"mappings":"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","file":"static/js/2.0054c04d.chunk.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(\"path\", {\n  d: \"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z\"\n}), 'ChevronLeft');\n\nexports.default = _default;","/**\n * Каскадер печатных форм\n *\n * @module MenuPrint\n *\n * Created by Evgeniy Malyarov on 15.05.2019.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport IconButton from '@material-ui/core/IconButton';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport PrintIcon from '@material-ui/icons/Print';\nimport ChevronLeft from '@material-ui/icons/ChevronLeft';\n\nclass SubMenu extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      anchorEl: null\n    };\n\n    this.handleOpen = event => {\n      this.setState({\n        anchorEl: event.currentTarget\n      });\n    };\n\n    this.handleClose = () => {\n      this.setState({\n        anchorEl: null\n      });\n    };\n  }\n\n  render() {\n    const {\n      props: {\n        items,\n        Icon,\n        text,\n        handlePrint,\n        prefix,\n        variant\n      },\n      state: {\n        anchorEl\n      }\n    } = this;\n    return [variant === 'button' ? /*#__PURE__*/React.createElement(IconButton, {\n      key: \"btn_open\",\n      onClick: this.handleOpen\n    }, /*#__PURE__*/React.createElement(Icon, null)) : /*#__PURE__*/React.createElement(MenuItem, {\n      key: `${prefix}_open`,\n      onClick: this.handleOpen\n    }, Icon && /*#__PURE__*/React.createElement(ListItemIcon, null, /*#__PURE__*/React.createElement(Icon, null)), text), /*#__PURE__*/React.createElement(Menu, {\n      key: `${prefix}_menu`,\n      open: Boolean(anchorEl),\n      anchorEl: anchorEl,\n      anchorOrigin: {\n        vertical: 'top',\n        horizontal: 'left'\n      },\n      transformOrigin: {\n        vertical: 'top',\n        horizontal: 'right'\n      },\n      onClose: this.handleClose\n    }, anchorEl && items.map(v => /*#__PURE__*/React.createElement(MenuItem, {\n      key: v.ref,\n      onClick: () => {\n        handlePrint(v);\n        this.handleClose();\n      }\n    }, v.name)))];\n  }\n\n}\n\nclass MenuPrint extends SubMenu {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      anchorEl: null,\n      plates: []\n    };\n  }\n\n  componentDidMount() {\n    const {\n      _mgr\n    } = this.props.scheme.child_meta();\n    _mgr && _mgr.printing_plates().then(plates => {\n      const groups = new Map();\n\n      for (const key in plates) {\n        const plate = plates[key];\n        const group = plate.name.includes('/') ? plate.name.substr(0, plate.name.indexOf('/')).trim() : 'Общее';\n\n        if (!groups.get(group)) {\n          groups.set(group, []);\n        }\n\n        groups.get(group).push(plate);\n      }\n\n      plates = [];\n      groups.forEach((value, name) => plates.push({\n        name,\n        value\n      }));\n      this.setState({\n        plates\n      });\n    });\n  }\n\n  render() {\n    const {\n      props: {\n        handlePrint,\n        variant\n      },\n      state: {\n        anchorEl,\n        plates\n      }\n    } = this;\n\n    if (plates.length === 1) {\n      return /*#__PURE__*/React.createElement(SubMenu, {\n        items: plates[0].value,\n        Icon: PrintIcon,\n        text: \"Печать\",\n        handlePrint: handlePrint,\n        prefix: \"root\",\n        variant: variant\n      });\n    }\n\n    return [variant === 'button' ? /*#__PURE__*/React.createElement(IconButton, {\n      key: \"btn_open\",\n      onClick: this.handleOpen\n    }, /*#__PURE__*/React.createElement(PrintIcon, null)) : /*#__PURE__*/React.createElement(MenuItem, {\n      key: \"prn_open\",\n      onClick: this.handleOpen\n    }, /*#__PURE__*/React.createElement(ListItemIcon, null, /*#__PURE__*/React.createElement(PrintIcon, null)), \"Печать\"), /*#__PURE__*/React.createElement(Menu, {\n      key: \"prn_menu\",\n      open: Boolean(anchorEl),\n      anchorEl: anchorEl,\n      anchorOrigin: {\n        vertical: 'top',\n        horizontal: 'left'\n      },\n      transformOrigin: {\n        vertical: 'top',\n        horizontal: 'right'\n      },\n      onClose: this.handleClose\n    }, anchorEl && plates.map((plate, index) => /*#__PURE__*/React.createElement(SubMenu, {\n      key: `prn_${index}`,\n      items: plate.value,\n      Icon: ChevronLeft,\n      text: plate.name,\n      handlePrint: handlePrint,\n      prefix: `prn_${index}`\n    })))];\n  }\n\n}\n\nMenuPrint.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  scheme: PropTypes.object.isRequired,\n  // значение настроек компоновки\n  handlePrint: PropTypes.func.isRequired,\n  // обработчик открытия диалога печати\n  variant: PropTypes.string // использовать IconButton вместо MenuItem\n\n} : {};\nexport default MenuPrint;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(\"path\", {\n  d: \"M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6h-1.5z\"\n}), 'AttachFile');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(\"path\", {\n  d: \"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z\"\n}), 'Delete');\n\nexports.default = _default;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\n/**\n * ### Поле ввода на базе material-ui-select\n *\n * @module FieldSelectStatic\n *\n */\nimport React from 'react';\nimport Input from '@material-ui/core/Input';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport AbstractField from './AbstractField';\nimport withStyles from './styles';\nimport cn from 'classnames';\n\nclass FieldSelectStatic extends AbstractField {\n  render() {\n    const {\n      props: {\n        _obj,\n        _fld,\n        options,\n        classes,\n        extClasses,\n        fullWidth,\n        label_position,\n        bar,\n        className\n      },\n      _meta,\n      onChange\n    } = this;\n    const attr = {\n      title: _meta.tooltip || _meta.synonym\n    };\n\n    const value = _obj[_fld].valueOf();\n\n    return /*#__PURE__*/React.createElement(FormControl, _extends({\n      className: extClasses && extClasses.control ? '' : cn(classes.formControl, className, bar && classes.barInput),\n      classes: extClasses && extClasses.control ? extClasses.control : null,\n      fullWidth: fullWidth\n    }, attr), label_position != 'hide' && /*#__PURE__*/React.createElement(InputLabel, {\n      classes: extClasses && extClasses.label ? extClasses.label : null\n    }, _meta.synonym), /*#__PURE__*/React.createElement(Select, {\n      native: true,\n      value: value,\n      onChange: onChange,\n      input: /*#__PURE__*/React.createElement(Input, {\n        classes: Object.assign({\n          input: cn(classes.input, attr.required && !value && classes.required)\n        }, extClasses && extClasses.input)\n      })\n    }, options.map((v, key) => /*#__PURE__*/React.createElement(\"option\", {\n      key: key,\n      value: v.valueOf()\n    }, v.toString()))));\n  }\n\n}\n\nexport default withStyles(FieldSelectStatic);\nexport class ActivityOption {\n  constructor(target) {\n    this.target = target;\n  }\n\n  toString() {\n    return this.target.text;\n  }\n\n  valueOf() {\n    return this.target.value;\n  }\n\n}","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport DownloadIcon from '@material-ui/icons/CloudDownload';\nimport UploadIcon from '@material-ui/icons/CloudUpload';\nimport RemoveIcon from '@material-ui/icons/Delete';\nimport CloseIcon from '@material-ui/icons/Close';\nimport withStyles from '../Header/toolbar';\nimport classnames from 'classnames';\n\nfunction AttachmentsToolbar(props) {\n  return /*#__PURE__*/React.createElement(Toolbar, {\n    disableGutters: true,\n    className: props.classes.toolbar\n  }, !props.short && /*#__PURE__*/React.createElement(IconButton, {\n    title: \"Добавить\",\n    onClick: props.handleAdd\n  }, /*#__PURE__*/React.createElement(UploadIcon, null)), /*#__PURE__*/React.createElement(IconButton, {\n    title: \"Получить\",\n    onClick: props.handleDownload\n  }, /*#__PURE__*/React.createElement(DownloadIcon, null)), !props.short && /*#__PURE__*/React.createElement(IconButton, {\n    title: \"Удалить\",\n    onClick: props.handleDelete\n  }, /*#__PURE__*/React.createElement(RemoveIcon, null)), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h6\",\n    color: \"inherit\",\n    className: props.classes.flex\n  }, \" \"), props.closeButton && props.handleClose && /*#__PURE__*/React.createElement(IconButton, {\n    title: \"Закрыть форму\",\n    onClick: props.handleClose\n  }, /*#__PURE__*/React.createElement(CloseIcon, null)));\n}\n\n;\nAttachmentsToolbar.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  handleAdd: PropTypes.func,\n  handleDelete: PropTypes.func,\n  handleDownload: PropTypes.func,\n  handleClose: PropTypes.func,\n  closeButton: PropTypes.bool,\n  short: PropTypes.bool\n} : {};\nexport default withStyles(AttachmentsToolbar);","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport MenuList from '@material-ui/core/MenuList';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport { withStyles } from '@material-ui/styles';\nimport Avatar from '@material-ui/core/Avatar';\nimport classnames from 'classnames';\n\nconst styles = theme => ({\n  avatar: {\n    margin: 10\n  },\n  menuItem: {\n    '&:focus': {\n      backgroundColor: theme.palette.primary.main,\n      '& $primary, & $icon, & $secondary': {\n        color: theme.palette.common.white\n      }\n    }\n  },\n  primary: {},\n  icon: {},\n  secondary: {}\n});\n\nfunction AttachmentsList(props) {\n  const {\n    classes,\n    _obj\n  } = props;\n  const list = [];\n\n  if (_obj._attachments) {\n    for (const name in _obj._attachments) {\n      const att = _obj._attachments[name];\n      list.push( /*#__PURE__*/React.createElement(MenuItem, {\n        key: name,\n        className: classes.menuItem,\n        onClick: () => props.handleSelect(name),\n        onDoubleClick: () => props.handleDownload(name)\n      }, /*#__PURE__*/React.createElement(Avatar, {\n        className: classes.avatar\n      }, name.substr(name.lastIndexOf('.') + 1, 3)), /*#__PURE__*/React.createElement(ListItemText, {\n        inset: true,\n        classes: {\n          primary: classes.primary,\n          secondary: classes.secondary\n        },\n        primary: name.substr(0, name.lastIndexOf('.')),\n        secondary: `${(att.length / 1000).round(2)}Kb, ${att.content_type}`\n      })));\n    }\n  } else {\n    list.push( /*#__PURE__*/React.createElement(MenuItem, {\n      key: \"empty\",\n      className: classes.menuItem\n    }, /*#__PURE__*/React.createElement(Avatar, {\n      className: classes.avatar\n    }, \"X\"), /*#__PURE__*/React.createElement(ListItemText, {\n      classes: {\n        primary: classes.primary\n      },\n      inset: true,\n      primary: \"Нет вложенных файлов\"\n    })));\n  }\n\n  return /*#__PURE__*/React.createElement(MenuList, null, list);\n}\n\n;\nAttachmentsList.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  _obj: PropTypes.object,\n  handleDownload: PropTypes.func.isRequired,\n  handleSelect: PropTypes.func.isRequired\n} : {};\nexport default withStyles(styles)(AttachmentsList);","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\n/**\n * Панель вложений\n *\n * @module Attachments\n *\n * Created by Evgeniy Malyarov on 03.05.2018.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport MDNRComponent from '../common/MDNRComponent';\nimport LoadingMessage from '../DumbLoader/LoadingMessage';\nimport AttachmentsToolbar from './AttachmentsToolbar';\nimport AttachmentsList from './AttachmentsList';\nimport Dialog from '../App/Dialog';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\n\nclass Attachments extends MDNRComponent {\n  constructor(props, context) {\n    super(props, context);\n\n    this.fileChange = ({\n      target\n    }) => {\n      if (target.files.length) {\n        let res;\n        const {\n          _obj\n        } = this.state;\n        const {\n          utils,\n          job_prm,\n          msg\n        } = $p;\n        (utils.mime_lookup ? Promise.resolve() : import('metadata-core/lib/mime.min').then(module => {\n          module.default.constructor.call($p);\n        })).then(() => {\n          for (let i = 0; i < target.files.length; i++) {\n            const file = target.files[i];\n\n            if (file.size > job_prm.attachment_max_size) {\n              throw new Error(msg.file_size + (job_prm.attachment_max_size / 1000000).round() + 'Mb');\n            }\n\n            if (res) {\n              res = res.then(() => _obj.save_attachment(file.name, file, utils.mime_lookup(file.name.substr(file.name.lastIndexOf('.') + 1))));\n            } else {\n              res = _obj.save_attachment(file.name, file, utils.mime_lookup(file.name.substr(file.name.lastIndexOf('.') + 1)));\n            }\n          }\n\n          return res;\n        }).then(() => _obj.load()).then(() => this.forceUpdate()).catch(err => {\n          // показываем диалог\n          this.setState({\n            dialog: {\n              title: msg.file_download,\n              message: err.message\n            }\n          });\n        });\n      }\n    };\n\n    this.handleAdd = () => {\n      this.input && this.input.click();\n    };\n\n    this.handleDelete = () => {\n      const {\n        name\n      } = this.state;\n\n      if (name) {\n        this.setState({\n          dialog: {\n            title: 'Удаление файла',\n            name: name,\n            message: `Удалить вложение \"${name}\"?`\n          }\n        });\n      } else {\n        this.setState({\n          dialog: {\n            title: $p.msg.file_download,\n            message: $p.msg.file_select\n          }\n        });\n      }\n    };\n\n    this.handleDeleteFinish = () => {\n      const {\n        name,\n        _obj\n      } = this.state;\n\n      _obj.delete_attachment(name).then(() => this.setState({\n        dialog: null\n      })).catch(err => {\n        // показываем диалог\n        this.setState({\n          dialog: {\n            title: $p.msg.file_download,\n            message: err.message\n          }\n        });\n      });\n    };\n\n    this.handleCloseDialog = () => {\n      this.setState({\n        dialog: null\n      });\n    };\n\n    this.handleSelect = name => {\n      this.setState({\n        name\n      });\n    };\n\n    this.handleDownload = () => {\n      const {\n        name,\n        _obj\n      } = this.state;\n\n      if (name) {\n        const url = `${_obj._manager.pouch_db.name}/${_obj.class_name}|${_obj.ref}/${name}`;\n        window.open(url, '_blank');\n      } else {\n        this.setState({\n          dialog: {\n            title: $p.msg.file_download,\n            message: $p.msg.file_select\n          }\n        });\n      }\n    };\n\n    this.state = {\n      _obj: props._obj,\n      dialog: null\n    };\n    this.input = null;\n  }\n\n  render() {\n    const {\n      state: {\n        _obj,\n        dialog\n      },\n      context,\n      props\n    } = this;\n    const tbProps = {\n      closeButton: !context.dnr,\n      handleAdd: this.handleAdd,\n      handleDelete: this.handleDelete,\n      handleDownload: this.handleDownload,\n      handleClose: props.handleClose\n    };\n    const listProps = {\n      _obj: _obj,\n      handleSelect: this.handleSelect,\n      handleDownload: this.handleDownload\n    };\n    return _obj ? [/*#__PURE__*/React.createElement(\"input\", {\n      key: \"input\",\n      ref: el => this.input = el,\n      onChange: this.fileChange,\n      type: \"file\",\n      multiple: \"1\",\n      style: {\n        display: 'none'\n      }\n    }), /*#__PURE__*/React.createElement(AttachmentsToolbar, _extends({\n      key: \"toolbar\"\n    }, tbProps)), /*#__PURE__*/React.createElement(AttachmentsList, _extends({\n      key: \"data\"\n    }, listProps)), dialog && /*#__PURE__*/React.createElement(Dialog, {\n      key: \"dialog\",\n      open: true,\n      title: dialog.title,\n      onClose: this.handleCloseDialog,\n      actions: dialog.name ? [/*#__PURE__*/React.createElement(Button, {\n        key: \"cancel\",\n        onClick: this.handleCloseDialog,\n        color: \"primary\"\n      }, \"Отмена\"), /*#__PURE__*/React.createElement(Button, {\n        key: \"ok\",\n        onClick: this.handleDeleteFinish,\n        color: \"primary\"\n      }, \"Ок\")] : /*#__PURE__*/React.createElement(Button, {\n        key: \"ok\",\n        onClick: this.handleCloseDialog,\n        color: \"primary\"\n      }, \"Ок\")\n    }, /*#__PURE__*/React.createElement(Typography, {\n      color: \"primary\"\n    }, dialog.message))] : /*#__PURE__*/React.createElement(LoadingMessage, null);\n  }\n\n}\n\nAttachments.propTypes = {\n  _obj: PropTypes.object,\n  // если объект не указан, получаем его по ссылке\n  _mgr: PropTypes.object,\n  // DataManager, с которым будет связан компонент\n  _acl: PropTypes.string,\n  // права на чтение-изменение\n  match: PropTypes.object,\n  // match роутера, из него добываем ref, можно передать fake-объект со ссылкой\n  read_only: PropTypes.object,\n  // элемент только для чтения\n  handleClose: PropTypes.func,\n  handleIfaceState: PropTypes.func\n};\nexport default Attachments;","import Attachments from './Attachments';\nexport default Attachments;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport MDNRComponent from '../common/MDNRComponent';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport Divider from '@material-ui/core/Divider';\nimport AppBar from '@material-ui/core/AppBar';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab'; // окно диалога, чтобы показать всплывающие формы\n\nimport Dialog from '../App/Dialog';\nimport LoadingMessage from '../DumbLoader/LoadingMessage';\nimport DataObjToolbar from './DataObjToolbar';\nimport DataField from '../DataField';\nimport FieldSelect from '../DataField/FieldSelect';\nimport FieldSelectStatic from '../DataField/FieldSelectStatic';\nimport TabularSection from '../TabularSection';\nimport FrmAttachments from '../FrmAttachments';\nexport function renderItems(items, customComponents) {\n  const {\n    props: {\n      _mgr,\n      classes\n    },\n    state: {\n      _obj,\n      _meta\n    }\n  } = this;\n  return items.map((item, index) => {\n    if (Array.isArray(item)) {\n      return renderItems.call(this, item, customComponents);\n    }\n\n    const {\n      element,\n      fld,\n      light,\n      cond_value,\n      items,\n      ...props\n    } = item;\n\n    if (_obj.is_folder && fld && !['id', 'name', 'owner', 'parent'].includes(fld)) {\n      return null;\n    }\n\n    switch (element) {\n      case 'DataField':\n        return /*#__PURE__*/React.createElement(DataField, _extends({\n          key: `fld_${index}`,\n          _obj: _obj,\n          _fld: fld,\n          _meta: _meta.fields[item.fld]\n        }, props));\n\n      case 'FieldSelect':\n        return /*#__PURE__*/React.createElement(FieldSelect, _extends({\n          key: `fld_${index}`,\n          _obj: _obj,\n          _fld: fld,\n          _meta: _meta.fields[item.fld]\n        }, props));\n\n      case 'FieldSelectStatic':\n        return /*#__PURE__*/React.createElement(FieldSelectStatic, _extends({\n          key: `fld_${index}`,\n          _obj: _obj,\n          _fld: fld,\n          _meta: _meta.fields[item.fld]\n        }, props));\n\n      case 'FormGroup':\n        return /*#__PURE__*/React.createElement(FormGroup, _extends({\n          key: `grp_${index}`,\n          className: classes.spaceLeft\n        }, props), renderItems.call(this, items, customComponents));\n\n      case 'Divider':\n        return /*#__PURE__*/React.createElement(Divider, {\n          light: light,\n          key: `dv_${index}`\n        });\n\n      case 'TabularSection':\n        return /*#__PURE__*/React.createElement(\"div\", {\n          key: `ts_${index}`,\n          style: {\n            height: 320\n          }\n        }, /*#__PURE__*/React.createElement(TabularSection, _extends({\n          _obj: _obj,\n          _tabular: fld\n        }, props)));\n\n      case 'Tabs':\n        return /*#__PURE__*/React.createElement(AppBar, {\n          position: \"static\",\n          color: \"default\"\n        }, /*#__PURE__*/React.createElement(Tabs, _extends({\n          key: `tabs_${index}`,\n          value: _obj[fld],\n          onChange: this.handleValueChange(fld)\n        }, props), renderItems.call(this, items, customComponents)));\n\n      case 'Tab':\n        return /*#__PURE__*/React.createElement(Tab, _extends({\n          key: `tab_${index}`,\n          value: cond_value !== undefined ? cond_value : index\n        }, props));\n\n      case 'Condition':\n        return _obj[fld] == cond_value && renderItems.call(this, items, customComponents);\n\n      default:\n        const Cmp = customComponents && customComponents[element];\n        return Cmp ? /*#__PURE__*/React.createElement(Cmp, _extends({\n          key: `fld_${index}`,\n          _obj: _obj,\n          _fld: fld,\n          _meta: _meta.fields[item.fld]\n        }, props)) : /*#__PURE__*/React.createElement(\"div\", {\n          key: index\n        }, `${element}: не реализовано в текущей версии`);\n    }\n  });\n}\n;\n\nclass DataObj extends MDNRComponent {\n  constructor(props, context) {\n    super(props, context);\n\n    this.handlePrint = model => {\n      const {\n        _obj\n      } = this.state;\n      _obj && _obj._manager.print(_obj, model);\n    };\n\n    this.handleError = err => {};\n\n    this.onDataChange = (obj, fields) => {\n      if ($p.utils.is_tabular(obj) && obj._owner._owner === this.state._obj || obj === this.state._obj) {\n        if (this.shouldComponentUpdate(this.props)) {\n          this.forceUpdate();\n        }\n      }\n    };\n\n    const {\n      _mgr,\n      _meta\n    } = props;\n    this._handlers = {\n      handleSave: this.handleSave.bind(this),\n      handlePost: this.handlePost.bind(this),\n      handleMarkDeleted: this.handleMarkDeleted.bind(this),\n      handlePrint: this.handlePrint.bind(this),\n      handleAttachments: this.handleAttachments.bind(this),\n      handleCloseAttachments: this.handleCloseAttachments.bind(this),\n      handleClose: this.handleClose.bind(this),\n      handleSaveClose: this.handleSaveClose.bind(this)\n    };\n    this.state = {\n      _meta: _meta || _mgr.metadata(),\n      _obj: null,\n      _attachments: false\n    };\n  }\n\n  componentDidMount() {\n    const {\n      _mgr,\n      match: {\n        params\n      }\n    } = this.props;\n    const get = params.num && _mgr.by_num ? _mgr.by_num(params.num) : _mgr.get(params.ref, 'promise');\n    get.then(_obj => _obj.load_linked_refs()).then(_obj => this.setState({\n      _obj\n    }, () => {\n      const {\n        onDataChange\n      } = this;\n\n      _mgr.on({\n        update: onDataChange,\n        mixin: onDataChange,\n        rows: onDataChange\n      });\n\n      this.shouldComponentUpdate(this.props);\n    })).catch(this.handleError);\n  }\n\n  componentWillUnmount() {\n    const {\n      onDataChange\n    } = this;\n\n    this.props._mgr.off({\n      update: onDataChange,\n      mixin: onDataChange,\n      rows: onDataChange\n    });\n\n    this.state._obj && this.state._obj.is_new() && this.state._obj.unload();\n  }\n\n  handlePost() {\n    return this.handleSave(true);\n  }\n\n  handleSave(post) {\n    const {\n      _obj\n    } = this.state;\n    return !_obj ? Promise.resolve() : _obj.save(typeof post === 'boolean' ? post : void 0).then(() => this.shouldComponentUpdate(this.props)).catch(err => {\n      // показываем диалог\n      this.props.handleIfaceState({\n        component: '',\n        name: 'alert',\n        value: {\n          open: true,\n          title: _obj.presentation,\n          text: err.reason || err.message\n        }\n      });\n      return err;\n    });\n  }\n\n  handleClose() {\n    const {\n      handlers,\n      _mgr\n    } = this.props;\n    const {\n      _obj\n    } = this.state;\n    const base = typeof $p === 'object' ? $p.job_prm.base : '';\n    handlers.handleNavigate(`${base || ''}/${_mgr.class_name}/list${_obj ? '/?ref=' + _obj.ref : ''}`);\n  }\n\n  handleSaveClose() {\n    this.handleSave().then(err => typeof err !== 'object' && this.handleClose());\n  }\n\n  handleMarkDeleted() {}\n\n  handleAttachments() {\n    this.setState({\n      _attachments: true\n    });\n  }\n\n  handleCloseAttachments() {\n    this.setState({\n      _attachments: false\n    });\n  }\n\n  handleValueChange(_fld) {\n    return (event, value) => {\n      const {\n        state: {\n          _obj\n        },\n        props: {\n          handlers\n        }\n      } = this;\n      const old_value = _obj[_fld];\n      _obj[_fld] = value || (event && event.target ? event.target.value : '');\n      handlers.handleValueChange && handlers.handleValueChange(_fld, old_value);\n    };\n  }\n\n  /**\n   * Render part with fields.\n   * @return {Element}\n   */\n  renderFields() {\n    const elements = [];\n    const {\n      struct\n    } = this.props;\n    const {\n      _meta,\n      _obj\n    } = this.state;\n\n    if (!struct) {\n      const exclude = ['predefined_name'];\n\n      if (_obj instanceof $p.classes.DocObj) {\n        elements.push( /*#__PURE__*/React.createElement(FormGroup, {\n          row: true,\n          key: `group_sys`\n        }, /*#__PURE__*/React.createElement(DataField, {\n          _obj: _obj,\n          key: `field_number_doc`,\n          _fld: \"number_doc\"\n        }), /*#__PURE__*/React.createElement(DataField, {\n          _obj: _obj,\n          key: `field_date`,\n          _fld: \"date\"\n        })));\n      } else if (_obj instanceof $p.classes.CatObj) {\n        _meta.code_length && elements.push( /*#__PURE__*/React.createElement(DataField, {\n          _obj: _obj,\n          key: `field_id`,\n          _fld: \"id\"\n        }));\n        _meta.main_presentation_name && elements.push( /*#__PURE__*/React.createElement(DataField, {\n          _obj: _obj,\n          key: `field_name`,\n          _fld: \"name\"\n        }));\n\n        if (_meta.has_owners) {\n          elements.push( /*#__PURE__*/React.createElement(DataField, {\n            _obj: _obj,\n            key: `field_owner`,\n            _fld: \"owner\"\n          }));\n          exclude.push('owner');\n        }\n\n        if (_meta.hierarchical) {\n          elements.push( /*#__PURE__*/React.createElement(DataField, {\n            _obj: _obj,\n            key: `field_parent`,\n            _fld: \"parent\"\n          }));\n          exclude.push('parent');\n        }\n      }\n\n      for (const _fld in _meta.fields) {\n        !exclude.includes(_fld) && elements.push( /*#__PURE__*/React.createElement(DataField, {\n          fullWidth: true,\n          key: `field_${_fld}`,\n          _obj: _obj,\n          _fld: _fld\n        }));\n      }\n    }\n\n    return elements.length === 0 ? null : /*#__PURE__*/React.createElement(FormGroup, null, elements);\n  }\n  /**\n   * Render part with tabular sections.\n   * @return {Element} [description]\n   */\n\n\n  renderTabularSections() {\n    const elements = [];\n    const {\n      _meta,\n      _obj\n    } = this.state;\n\n    for (const ts in _meta.tabular_sections) {\n      if (elements.length || Object.keys(_meta.fields).length) {\n        elements.push( /*#__PURE__*/React.createElement(Divider, {\n          light: true,\n          key: `dv_${ts}`\n        }));\n      }\n\n      elements.push( /*#__PURE__*/React.createElement(\"div\", {\n        key: `ts_${ts}`,\n        style: {\n          height: 300\n        }\n      }, /*#__PURE__*/React.createElement(TabularSection, {\n        _obj: _obj,\n        _tabular: ts\n      })));\n    }\n\n    return elements.length === 0 ? null : /*#__PURE__*/React.createElement(FormGroup, null, elements);\n  }\n\n  get ltitle() {\n    const {\n      _meta,\n      _obj\n    } = this.state;\n    let ltitle = _obj && _obj.presentation || _meta.obj_presentation || _meta.synonym;\n\n    if (_obj && _obj.is_folder) {\n      ltitle += ' (Группа)';\n    }\n\n    if (_obj && _obj._modified && ltitle[ltitle.length - 1] !== '*') {\n      ltitle += ' *';\n    }\n\n    return ltitle;\n  }\n\n  get Toolbar() {\n    return DataObjToolbar;\n  }\n\n  render() {\n    const {\n      props: {\n        _mgr,\n        classes\n      },\n      state: {\n        _obj,\n        _meta,\n        _attachments\n      },\n      context,\n      _handlers,\n      Toolbar,\n      denyDel,\n      readOnly\n    } = this;\n    const toolbar_props = Object.assign({\n      closeButton: !context.dnr,\n      posted: _obj && _obj.posted,\n      deleted: _obj && _obj.deleted,\n      postable: !!(_meta.posted || _mgr.metadata('posted')),\n      deletable: !_meta.read_only && !denyDel && !readOnly,\n      read_only: _meta.read_only || readOnly,\n      _obj\n    }, _handlers);\n    return _obj ? [/*#__PURE__*/React.createElement(Toolbar, _extends({\n      key: \"toolbar\"\n    }, toolbar_props)), _meta.form && _meta.form.obj && _meta.form.obj.items ? renderItems.call(this, _meta.form.obj.items, context.customComponents) : /*#__PURE__*/React.createElement(FormGroup, {\n      key: \"data\",\n      className: classes.spaceLeft\n    }, this.renderFields(), this.renderTabularSections()), _attachments && /*#__PURE__*/React.createElement(Dialog, {\n      key: \"attachments\",\n      open: true,\n      noSpace: true,\n      title: `Вложения /${this.ltitle}/`,\n      onClose: _handlers.handleCloseAttachments\n    }, /*#__PURE__*/React.createElement(FrmAttachments, {\n      _obj: _obj,\n      handleClose: _handlers.handleCloseAttachments\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      key: \"bottom\",\n      style: {\n        marginBottom: 8\n      }\n    })] : /*#__PURE__*/React.createElement(LoadingMessage, null);\n  }\n\n}\n\nDataObj.propTypes = {\n  _mgr: PropTypes.object,\n  // DataManager, с которым будет связан компонент\n  _acl: PropTypes.string,\n  // Права на чтение-изменение\n  _meta: PropTypes.object,\n  // Здесь можно переопределить метаданные\n  match: PropTypes.object,\n  // match роутера, из него добываем ref, можно передать fake-объект со ссылкой\n  classes: PropTypes.object,\n  // имена css\n  read_only: PropTypes.bool,\n  // Элемент только для чтения\n  handlers: PropTypes.object.isRequired // обработчики редактирования объекта\n\n};\nexport default DataObj;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport Button from '@material-ui/core/Button';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuPrint from '../DynList/MenuPrint';\nimport SaveIcon from '@material-ui/icons/Save';\nimport SendIcon from '@material-ui/icons/CheckCircleOutline';\nimport RemoveIcon from '@material-ui/icons/DeleteOutline';\nimport CloseIcon from '@material-ui/icons/Close';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport PrintIcon from '@material-ui/icons/Print';\nimport AttachIcon from '@material-ui/icons/AttachFile';\nimport withStyles from '../Header/toolbar';\nimport classnames from 'classnames';\n\nclass DataObjToolbar extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      anchorEl: undefined,\n      open: false\n    };\n\n    this.handleClick = event => {\n      this.setState({\n        open: true,\n        anchorEl: event.currentTarget\n      });\n    };\n\n    this.handleRequestClose = () => {\n      this.setState({\n        open: false\n      });\n    };\n  }\n\n  render() {\n    const {\n      props\n    } = this;\n    const showMenu = props.showMenu || props.handleAttachments || props.handlePrint;\n    return /*#__PURE__*/React.createElement(Toolbar, {\n      disableGutters: true,\n      className: props.classes.toolbar\n    }, props.handleSaveClose && !props.read_only && /*#__PURE__*/React.createElement(Button, {\n      title: \"Записать и закрыть\",\n      size: \"small\",\n      variant: \"outlined\",\n      className: props.classes.spaceLeft,\n      onClick: props.handleSaveClose\n    }, \"Записать и закрыть\"), !props.read_only && /*#__PURE__*/React.createElement(IconButton, {\n      title: \"Записать\",\n      onClick: props.handleSave\n    }, /*#__PURE__*/React.createElement(SaveIcon, null)), !props.read_only && props.postable && /*#__PURE__*/React.createElement(IconButton, {\n      title: props.posted ? 'Отменить проведение' : 'Провести',\n      onClick: () => props.handleSave(!props.posted)\n    }, /*#__PURE__*/React.createElement(SendIcon, null)), !props.read_only && props.deletable && /*#__PURE__*/React.createElement(IconButton, {\n      title: props.deleted ? 'Снять пометку удаления' : 'Пометить на удаление',\n      onClick: props.handleMarkDeleted\n    }, /*#__PURE__*/React.createElement(RemoveIcon, null)), props.buttons, /*#__PURE__*/React.createElement(Typography, {\n      variant: \"h6\",\n      color: \"inherit\",\n      className: props.classes.flex\n    }, \" \"), showMenu && /*#__PURE__*/React.createElement(IconButton, {\n      onClick: this.handleClick,\n      title: \"Дополнительно\"\n    }, /*#__PURE__*/React.createElement(MoreVertIcon, null)), /*#__PURE__*/React.createElement(Menu, {\n      anchorEl: this.state.anchorEl,\n      open: this.state.open,\n      onClose: this.handleRequestClose\n    }, props.handlePrint && /*#__PURE__*/React.createElement(MenuPrint, {\n      scheme: {\n        child_meta() {\n          return {\n            _mgr: props._obj._manager\n          };\n        }\n\n      },\n      handlePrint: ref => {\n        return props.handlePrint(ref);\n      }\n    }), props.handleAttachments && /*#__PURE__*/React.createElement(MenuItem, {\n      onClick: props.handleAttachments\n    }, /*#__PURE__*/React.createElement(AttachIcon, null), \"  Вложения\"), props.menu_buttons), props.closeButton && /*#__PURE__*/React.createElement(IconButton, {\n      title: \"Закрыть форму\",\n      onClick: props.handleClose\n    }, /*#__PURE__*/React.createElement(CloseIcon, null)));\n  }\n\n}\n\nDataObjToolbar.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  handleSave: PropTypes.func.isRequired,\n  // обработчик добавления объекта\n  handlePost: PropTypes.func,\n  // обработчик проведения\n  handleMarkDeleted: PropTypes.func.isRequired,\n  // обработчик пометки удаления\n  handlePrint: PropTypes.func,\n  // обработчик открытия диалога печати\n  handleAttachments: PropTypes.func,\n  // обработчик открытия диалога присоединенных файлов\n  handleClose: PropTypes.func,\n  // команда Закрыть форму\n  postable: PropTypes.bool,\n  // объект можно провести-распровести\n  posted: PropTypes.bool,\n  // объект проведён\n  deletable: PropTypes.bool,\n  // объект можно пометить на удаление или снять пометку\n  deleted: PropTypes.bool // объект помечен на удаление\n\n} : {};\n;\nexport default withStyles(DataObjToolbar);","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(\"path\", {\n  d: \"M16.59 7.58L10 14.17l-3.59-3.58L5 12l5 5 8-8zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"\n}), 'CheckCircleOutline');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(\"path\", {\n  d: \"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z\"\n}), 'CloudUpload');\n\nexports.default = _default;"],"sourceRoot":""}