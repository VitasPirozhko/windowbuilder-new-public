{"version":3,"sources":["../node_modules/@material-ui/icons/ChevronLeft.js","../node_modules/metadata-react/DynList/MenuPrint.js","../node_modules/@material-ui/icons/AttachFile.js","../node_modules/metadata-react/DynList/index.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","default","_react","_default","createElement","d","SubMenu","React","Component","constructor","args","super","this","state","anchorEl","handleOpen","event","setState","currentTarget","handleClose","render","props","items","Icon","text","handlePrint","prefix","variant","IconButton","key","onClick","MenuItem","ListItemIcon","Menu","open","Boolean","anchorOrigin","vertical","horizontal","transformOrigin","onClose","map","v","ref","name","MenuPrint","plates","componentDidMount","_mgr","scheme","child_meta","printing_plates","then","groups","Map","plate","group","includes","substr","indexOf","trim","get","set","push","forEach","length","PrintIcon","index","ChevronLeft","propTypes","DynList"],"mappings":"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","file":"static/js/19.540b7b8c.chunk.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(\"path\", {\n  d: \"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z\"\n}), 'ChevronLeft');\n\nexports.default = _default;","/**\n * Каскадер печатных форм\n *\n * @module MenuPrint\n *\n * Created by Evgeniy Malyarov on 15.05.2019.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport IconButton from '@material-ui/core/IconButton';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport PrintIcon from '@material-ui/icons/Print';\nimport ChevronLeft from '@material-ui/icons/ChevronLeft';\n\nclass SubMenu extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      anchorEl: null\n    };\n\n    this.handleOpen = event => {\n      this.setState({\n        anchorEl: event.currentTarget\n      });\n    };\n\n    this.handleClose = () => {\n      this.setState({\n        anchorEl: null\n      });\n    };\n  }\n\n  render() {\n    const {\n      props: {\n        items,\n        Icon,\n        text,\n        handlePrint,\n        prefix,\n        variant\n      },\n      state: {\n        anchorEl\n      }\n    } = this;\n    return [variant === 'button' ? /*#__PURE__*/React.createElement(IconButton, {\n      key: \"btn_open\",\n      onClick: this.handleOpen\n    }, /*#__PURE__*/React.createElement(Icon, null)) : /*#__PURE__*/React.createElement(MenuItem, {\n      key: `${prefix}_open`,\n      onClick: this.handleOpen\n    }, Icon && /*#__PURE__*/React.createElement(ListItemIcon, null, /*#__PURE__*/React.createElement(Icon, null)), text), /*#__PURE__*/React.createElement(Menu, {\n      key: `${prefix}_menu`,\n      open: Boolean(anchorEl),\n      anchorEl: anchorEl,\n      anchorOrigin: {\n        vertical: 'top',\n        horizontal: 'left'\n      },\n      transformOrigin: {\n        vertical: 'top',\n        horizontal: 'right'\n      },\n      onClose: this.handleClose\n    }, anchorEl && items.map(v => /*#__PURE__*/React.createElement(MenuItem, {\n      key: v.ref,\n      onClick: () => {\n        handlePrint(v);\n        this.handleClose();\n      }\n    }, v.name)))];\n  }\n\n}\n\nclass MenuPrint extends SubMenu {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      anchorEl: null,\n      plates: []\n    };\n  }\n\n  componentDidMount() {\n    const {\n      _mgr\n    } = this.props.scheme.child_meta();\n    _mgr && _mgr.printing_plates().then(plates => {\n      const groups = new Map();\n\n      for (const key in plates) {\n        const plate = plates[key];\n        const group = plate.name.includes('/') ? plate.name.substr(0, plate.name.indexOf('/')).trim() : 'Общее';\n\n        if (!groups.get(group)) {\n          groups.set(group, []);\n        }\n\n        groups.get(group).push(plate);\n      }\n\n      plates = [];\n      groups.forEach((value, name) => plates.push({\n        name,\n        value\n      }));\n      this.setState({\n        plates\n      });\n    });\n  }\n\n  render() {\n    const {\n      props: {\n        handlePrint,\n        variant\n      },\n      state: {\n        anchorEl,\n        plates\n      }\n    } = this;\n\n    if (plates.length === 1) {\n      return /*#__PURE__*/React.createElement(SubMenu, {\n        items: plates[0].value,\n        Icon: PrintIcon,\n        text: \"Печать\",\n        handlePrint: handlePrint,\n        prefix: \"root\",\n        variant: variant\n      });\n    }\n\n    return [variant === 'button' ? /*#__PURE__*/React.createElement(IconButton, {\n      key: \"btn_open\",\n      onClick: this.handleOpen\n    }, /*#__PURE__*/React.createElement(PrintIcon, null)) : /*#__PURE__*/React.createElement(MenuItem, {\n      key: \"prn_open\",\n      onClick: this.handleOpen\n    }, /*#__PURE__*/React.createElement(ListItemIcon, null, /*#__PURE__*/React.createElement(PrintIcon, null)), \"Печать\"), /*#__PURE__*/React.createElement(Menu, {\n      key: \"prn_menu\",\n      open: Boolean(anchorEl),\n      anchorEl: anchorEl,\n      anchorOrigin: {\n        vertical: 'top',\n        horizontal: 'left'\n      },\n      transformOrigin: {\n        vertical: 'top',\n        horizontal: 'right'\n      },\n      onClose: this.handleClose\n    }, anchorEl && plates.map((plate, index) => /*#__PURE__*/React.createElement(SubMenu, {\n      key: `prn_${index}`,\n      items: plate.value,\n      Icon: ChevronLeft,\n      text: plate.name,\n      handlePrint: handlePrint,\n      prefix: `prn_${index}`\n    })))];\n  }\n\n}\n\nMenuPrint.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  scheme: PropTypes.object.isRequired,\n  // значение настроек компоновки\n  handlePrint: PropTypes.func.isRequired,\n  // обработчик открытия диалога печати\n  variant: PropTypes.string // использовать IconButton вместо MenuItem\n\n} : {};\nexport default MenuPrint;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(\"path\", {\n  d: \"M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6h-1.5z\"\n}), 'AttachFile');\n\nexports.default = _default;","import DynList from './DynList';\nexport default DynList;"],"sourceRoot":""}