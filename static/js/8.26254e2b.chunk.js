(this["webpackJsonpwindowbuilder-new"]=this["webpackJsonpwindowbuilder-new"]||[]).push([[8],{561:function(e,t,a){"use strict";var n=a(6),l=a(9),r=a(8),o=a(7),c=a(0),s=a.n(c),i=(a(1),a(168)),u=a(219),h=a(170),d=a(540),m=a(562),f=a.n(m),p=a(563),_=a.n(p),b=function(e){Object(r.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(n.a)(this,a);for(var l=arguments.length,r=new Array(l),o=0;o<l;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={anchorEl:null},e.handleOpen=function(t){e.setState({anchorEl:t.currentTarget})},e.handleClose=function(){e.setState({anchorEl:null})},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.items,n=t.Icon,l=t.text,r=t.handlePrint,o=t.prefix,c=t.variant,m=this.state.anchorEl;return["button"===c?s.a.createElement(h.a,{key:"btn_open",onClick:this.handleOpen},s.a.createElement(n,null)):s.a.createElement(u.a,{key:"".concat(o,"_open"),onClick:this.handleOpen},n&&s.a.createElement(d.a,null,s.a.createElement(n,null)),l),s.a.createElement(i.a,{key:"".concat(o,"_menu"),open:Boolean(m),anchorEl:m,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:this.handleClose},m&&a.map((function(t){return s.a.createElement(u.a,{key:t.ref,onClick:function(){r(t),e.handleClose()}},t.name)})))]}}]),a}(s.a.Component),v=function(e){Object(r.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(n.a)(this,a);for(var l=arguments.length,r=new Array(l),o=0;o<l;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={anchorEl:null,plates:[]},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.scheme.child_meta()._mgr;t&&t.printing_plates().then((function(t){var a=new Map;for(var n in t){var l=t[n],r=l.name.includes("/")?l.name.substr(0,l.name.indexOf("/")).trim():"\u041e\u0431\u0449\u0435\u0435";a.get(r)||a.set(r,[]),a.get(r).push(l)}t=[],a.forEach((function(e,a){return t.push({name:a,value:e})})),e.setState({plates:t})}))}},{key:"render",value:function(){var e=this.props,t=e.handlePrint,a=e.variant,n=this.state,l=n.anchorEl,r=n.plates;return 1===r.length?s.a.createElement(b,{items:r[0].value,Icon:f.a,text:"\u041f\u0435\u0447\u0430\u0442\u044c",handlePrint:t,prefix:"root",variant:a}):["button"===a?s.a.createElement(h.a,{key:"btn_open",onClick:this.handleOpen},s.a.createElement(f.a,null)):s.a.createElement(u.a,{key:"prn_open",onClick:this.handleOpen},s.a.createElement(d.a,null,s.a.createElement(f.a,null)),"\u041f\u0435\u0447\u0430\u0442\u044c"),s.a.createElement(i.a,{key:"prn_menu",open:Boolean(l),anchorEl:l,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:this.handleClose},l&&r.map((function(e,a){return s.a.createElement(b,{key:"prn_".concat(a),items:e.value,Icon:_.a,text:e.name,handlePrint:t,prefix:"prn_".concat(a)})})))]}}]),a}(b);v.propTypes={},t.a=v},563:function(e,t,a){"use strict";var n=a(17);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(0)),r=(0,n(a(18)).default)(l.default.createElement("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"ChevronLeft");t.default=r},564:function(e,t,a){"use strict";var n=a(17);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(0)),r=(0,n(a(18)).default)(l.default.createElement("path",{d:"M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6h-1.5z"}),"AttachFile");t.default=r},681:function(e,t,a){"use strict";var n=a(17);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(0)),r=(0,n(a(18)).default)(l.default.createElement("path",{d:"M16.59 7.58L10 14.17l-3.59-3.58L5 12l5 5 8-8zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"CheckCircleOutline");t.default=r},682:function(e,t,a){"use strict";var n=a(17);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(0)),r=(0,n(a(18)).default)(l.default.createElement("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"}),"CloudUpload");t.default=r},683:function(e,t,a){"use strict";var n=a(17);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(0)),r=(0,n(a(18)).default)(l.default.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");t.default=r},691:function(e,t,a){"use strict";a.r(t);var n=a(6),l=a(9),r=a(8),o=a(7),c=a(0),s=a.n(c),i=a(26),u=a(42),h=a(1),d=a.n(h),m=a(560),f=a(345),p=a(538),_=a(546),b=a(552),v=a(536),y=a(95),j=a(222),E=a(464),g=a(53),k=a(170),C=a(169),O=a(168),w=a(219),S=a(561),D=a(635),P=a.n(D),M=a(681),x=a.n(M),A=a(571),z=a.n(A),T=a(239),$=a.n(T),I=a(227),N=a.n(I),V=a(564),F=a.n(V),L=a(93),B=a(11),U=a.n(B),q=function(e){Object(r.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(n.a)(this,a);for(var l=arguments.length,r=new Array(l),o=0;o<l;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={anchorEl:void 0,open:!1},e.handleClick=function(t){e.setState({open:!0,anchorEl:t.currentTarget})},e.handleRequestClose=function(){e.setState({open:!1})},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.showMenu||e.handleAttachments||e.handlePrint;return s.a.createElement(E.a,{disableGutters:!0,className:e.classes.toolbar},e.handleSaveClose&&!e.read_only&&s.a.createElement(C.a,{title:"\u0417\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0438 \u0437\u0430\u043a\u0440\u044b\u0442\u044c",size:"small",variant:"outlined",className:e.classes.spaceLeft,onClick:e.handleSaveClose},"\u0417\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0438 \u0437\u0430\u043a\u0440\u044b\u0442\u044c"),!e.read_only&&s.a.createElement(k.a,{title:"\u0417\u0430\u043f\u0438\u0441\u0430\u0442\u044c",onClick:e.handleSave},s.a.createElement(P.a,null)),!e.read_only&&e.postable&&s.a.createElement(k.a,{title:e.posted?"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0435":"\u041f\u0440\u043e\u0432\u0435\u0441\u0442\u0438",onClick:function(){return e.handleSave(!e.posted)}},s.a.createElement(x.a,null)),!e.read_only&&e.deletable&&s.a.createElement(k.a,{title:e.deleted?"\u0421\u043d\u044f\u0442\u044c \u043f\u043e\u043c\u0435\u0442\u043a\u0443 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f":"\u041f\u043e\u043c\u0435\u0442\u0438\u0442\u044c \u043d\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435",onClick:e.handleMarkDeleted},s.a.createElement(z.a,null)),e.buttons,s.a.createElement(g.a,{variant:"h6",color:"inherit",className:e.classes.flex}," "),t&&s.a.createElement(k.a,{onClick:this.handleClick,title:"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e"},s.a.createElement(N.a,null)),s.a.createElement(O.a,{anchorEl:this.state.anchorEl,open:this.state.open,onClose:this.handleRequestClose},e.handlePrint&&s.a.createElement(S.a,{scheme:{child_meta:function(){return{_mgr:e._obj._manager}}},handlePrint:function(t){return e.handlePrint(t)}}),e.handleAttachments&&s.a.createElement(w.a,{onClick:e.handleAttachments},s.a.createElement(F.a,null)," \xa0\u0412\u043b\u043e\u0436\u0435\u043d\u0438\u044f"),e.menu_buttons),e.closeButton&&s.a.createElement(k.a,{title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u0444\u043e\u0440\u043c\u0443",onClick:e.handleClose},s.a.createElement($.a,null)))}}]),a}(c.Component);q.propTypes={};var H=Object(L.a)(q),W=a(133),G=a(253),R=a(124),J=a(171),K=a(157),X=a(348),Q=a(28),Y=a(44);function Z(){return(Z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var ee=function(e){Object(r.a)(a,e);var t=Object(o.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e._obj,a=e._fld,n=e.options,l=e.classes,r=e.extClasses,o=e.fullWidth,c=e.label_position,i=e.bar,u=e.className,h=this._meta,d=this.onChange,m={title:h.tooltip||h.synonym},f=t[a].valueOf();return s.a.createElement(K.a,Z({className:r&&r.control?"":U()(l.formControl,u,i&&l.barInput),classes:r&&r.control?r.control:null,fullWidth:o},m),"hide"!=c&&s.a.createElement(J.a,{classes:r&&r.label?r.label:null},h.synonym),s.a.createElement(X.a,{native:!0,value:f,onChange:d,input:s.a.createElement(R.a,{classes:Object.assign({input:U()(l.input,m.required&&!f&&l.required)},r&&r.input)})},n.map((function(e,t){return s.a.createElement("option",{key:t,value:e.valueOf()},e.toString())}))))}}]),a}(Q.b),te=Object(Y.a)(ee),ae=a(582),ne=a(234),le=a.n(ne),re=a(682),oe=a.n(re),ce=a(683),se=a.n(ce);function ie(e){return s.a.createElement(E.a,{disableGutters:!0,className:e.classes.toolbar},!e.short&&s.a.createElement(k.a,{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",onClick:e.handleAdd},s.a.createElement(oe.a,null)),s.a.createElement(k.a,{title:"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c",onClick:e.handleDownload},s.a.createElement(le.a,null)),!e.short&&s.a.createElement(k.a,{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",onClick:e.handleDelete},s.a.createElement(se.a,null)),s.a.createElement(g.a,{variant:"h6",color:"inherit",className:e.classes.flex}," "),e.closeButton&&e.handleClose&&s.a.createElement(k.a,{title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u0444\u043e\u0440\u043c\u0443",onClick:e.handleClose},s.a.createElement($.a,null)))}ie.propTypes={};var ue=Object(L.a)(ie),he=a(472),de=a(537),me=a(82),fe=a(695);function pe(e){var t=e.classes,a=e._obj,n=[];if(a._attachments){var l=function(l){var r=a._attachments[l];n.push(s.a.createElement(w.a,{key:l,className:t.menuItem,onClick:function(){return e.handleSelect(l)},onDoubleClick:function(){return e.handleDownload(l)}},s.a.createElement(fe.a,{className:t.avatar},l.substr(l.lastIndexOf(".")+1,3)),s.a.createElement(de.a,{inset:!0,classes:{primary:t.primary,secondary:t.secondary},primary:l.substr(0,l.lastIndexOf(".")),secondary:"".concat((r.length/1e3).round(2),"Kb, ").concat(r.content_type)})))};for(var r in a._attachments)l(r)}else n.push(s.a.createElement(w.a,{key:"empty",className:t.menuItem},s.a.createElement(fe.a,{className:t.avatar},"X"),s.a.createElement(de.a,{classes:{primary:t.primary},inset:!0,primary:"\u041d\u0435\u0442 \u0432\u043b\u043e\u0436\u0435\u043d\u043d\u044b\u0445 \u0444\u0430\u0439\u043b\u043e\u0432"})));return s.a.createElement(he.a,null,n)}pe.propTypes={};var _e=Object(me.a)((function(e){return{avatar:{margin:10},menuItem:{"&:focus":{backgroundColor:e.palette.primary.main,"& $primary, & $icon, & $secondary":{color:e.palette.common.white}}},primary:{},icon:{},secondary:{}}}))(pe);function be(){return(be=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var ve=function(e){Object(r.a)(c,e);var t=Object(o.a)(c);function c(e,l){var r;return Object(n.a)(this,c),(r=t.call(this,e,l)).fileChange=function(e){var t=e.target;if(t.files.length){var n,l=r.state._obj,o=$p,c=o.utils,s=o.job_prm,i=o.msg;(c.mime_lookup?Promise.resolve():a.e(12).then(a.t.bind(null,690,7)).then((function(e){e.default.constructor.call($p)}))).then((function(){for(var e=function(e){var a=t.files[e];if(a.size>s.attachment_max_size)throw new Error(i.file_size+(s.attachment_max_size/1e6).round()+"Mb");n=n?n.then((function(){return l.save_attachment(a.name,a,c.mime_lookup(a.name.substr(a.name.lastIndexOf(".")+1)))})):l.save_attachment(a.name,a,c.mime_lookup(a.name.substr(a.name.lastIndexOf(".")+1)))},a=0;a<t.files.length;a++)e(a);return n})).then((function(){return l.load()})).then((function(){return r.forceUpdate()})).catch((function(e){r.setState({dialog:{title:i.file_download,message:e.message}})}))}},r.handleAdd=function(){r.input&&r.input.click()},r.handleDelete=function(){var e=r.state.name;e?r.setState({dialog:{title:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0444\u0430\u0439\u043b\u0430",name:e,message:'\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u043b\u043e\u0436\u0435\u043d\u0438\u0435 "'.concat(e,'"?')}}):r.setState({dialog:{title:$p.msg.file_download,message:$p.msg.file_select}})},r.handleDeleteFinish=function(){var e=r.state,t=e.name;e._obj.delete_attachment(t).then((function(){return r.setState({dialog:null})})).catch((function(e){r.setState({dialog:{title:$p.msg.file_download,message:e.message}})}))},r.handleCloseDialog=function(){r.setState({dialog:null})},r.handleSelect=function(e){r.setState({name:e})},r.handleDownload=function(){var e=r.state,t=e.name,a=e._obj;if(t){var n="".concat(a._manager.pouch_db.name,"/").concat(a.class_name,"|").concat(a.ref,"/").concat(t);window.open(n,"_blank")}else r.setState({dialog:{title:$p.msg.file_download,message:$p.msg.file_select}})},r.state={_obj:e._obj,dialog:null},r.input=null,r}return Object(l.a)(c,[{key:"render",value:function(){var e=this,t=this.state,a=t._obj,n=t.dialog,l=this.context,r=this.props,o={closeButton:!l.dnr,handleAdd:this.handleAdd,handleDelete:this.handleDelete,handleDownload:this.handleDownload,handleClose:r.handleClose},c={_obj:a,handleSelect:this.handleSelect,handleDownload:this.handleDownload};return a?[s.a.createElement("input",{key:"input",ref:function(t){return e.input=t},onChange:this.fileChange,type:"file",multiple:"1",style:{display:"none"}}),s.a.createElement(ue,be({key:"toolbar"},o)),s.a.createElement(_e,be({key:"data"},c)),n&&s.a.createElement(y.a,{key:"dialog",open:!0,title:n.title,onClose:this.handleCloseDialog,actions:n.name?[s.a.createElement(C.a,{key:"cancel",onClick:this.handleCloseDialog,color:"primary"},"\u041e\u0442\u043c\u0435\u043d\u0430"),s.a.createElement(C.a,{key:"ok",onClick:this.handleDeleteFinish,color:"primary"},"\u041e\u043a")]:s.a.createElement(C.a,{key:"ok",onClick:this.handleCloseDialog,color:"primary"},"\u041e\u043a")},s.a.createElement(g.a,{color:"primary"},n.message))]:s.a.createElement(j.a,null)}}]),c}(m.a);ve.propTypes={_obj:d.a.object,_mgr:d.a.object,_acl:d.a.string,match:d.a.object,read_only:d.a.object,handleClose:d.a.func,handleIfaceState:d.a.func};var ye=ve;function je(){return(je=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Ee(e,t){var a=this,n=this.props,l=(n._mgr,n.classes),r=this.state,o=r._obj,c=r._meta;return e.map((function(e,n){if(Array.isArray(e))return Ee.call(a,e,t);var r=e.element,i=e.fld,h=e.light,d=e.cond_value,m=e.items,y=Object(u.a)(e,["element","fld","light","cond_value","items"]);if(o.is_folder&&i&&!["id","name","owner","parent"].includes(i))return null;switch(r){case"DataField":return s.a.createElement(W.a,je({key:"fld_".concat(n),_obj:o,_fld:i,_meta:c.fields[e.fld]},y));case"FieldSelect":return s.a.createElement(G.a,je({key:"fld_".concat(n),_obj:o,_fld:i,_meta:c.fields[e.fld]},y));case"FieldSelectStatic":return s.a.createElement(te,je({key:"fld_".concat(n),_obj:o,_fld:i,_meta:c.fields[e.fld]},y));case"FormGroup":return s.a.createElement(f.a,je({key:"grp_".concat(n),className:l.spaceLeft},y),Ee.call(a,m,t));case"Divider":return s.a.createElement(p.a,{light:h,key:"dv_".concat(n)});case"TabularSection":return s.a.createElement("div",{key:"ts_".concat(n),style:{height:320}},s.a.createElement(ae.a,je({_obj:o,_tabular:i},y)));case"Tabs":return s.a.createElement(_.a,{position:"static",color:"default"},s.a.createElement(b.a,je({key:"tabs_".concat(n),value:o[i],onChange:a.handleValueChange(i)},y),Ee.call(a,m,t)));case"Tab":return s.a.createElement(v.a,je({key:"tab_".concat(n),value:void 0!==d?d:n},y));case"Condition":return o[i]==d&&Ee.call(a,m,t);default:var j=t&&t[r];return j?s.a.createElement(j,je({key:"fld_".concat(n),_obj:o,_fld:i,_meta:c.fields[e.fld]},y)):s.a.createElement("div",{key:n},"".concat(r,": \u043d\u0435 \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043e \u0432 \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u0432\u0435\u0440\u0441\u0438\u0438"))}}))}var ge=function(e){Object(r.a)(a,e);var t=Object(o.a)(a);function a(e,l){var r;Object(n.a)(this,a),(r=t.call(this,e,l)).handlePrint=function(e){var t=r.state._obj;t&&t._manager.print(t,e)},r.handleError=function(e){},r.onDataChange=function(e,t){($p.utils.is_tabular(e)&&e._owner._owner===r.state._obj||e===r.state._obj)&&r.shouldComponentUpdate(r.props)&&r.forceUpdate()};var o=e._mgr,c=e._meta;return r._handlers={handleSave:r.handleSave.bind(Object(i.a)(r)),handlePost:r.handlePost.bind(Object(i.a)(r)),handleMarkDeleted:r.handleMarkDeleted.bind(Object(i.a)(r)),handlePrint:r.handlePrint.bind(Object(i.a)(r)),handleAttachments:r.handleAttachments.bind(Object(i.a)(r)),handleCloseAttachments:r.handleCloseAttachments.bind(Object(i.a)(r)),handleClose:r.handleClose.bind(Object(i.a)(r)),handleSaveClose:r.handleSaveClose.bind(Object(i.a)(r))},r.state={_meta:c||o.metadata(),_obj:null,_attachments:!1},r}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t._mgr,n=t.match.params;(n.num&&a.by_num?a.by_num(n.num):a.get(n.ref,"promise")).then((function(e){return e.load_linked_refs()})).then((function(t){return e.setState({_obj:t},(function(){var t=e.onDataChange;a.on({update:t,mixin:t,rows:t}),e.shouldComponentUpdate(e.props)}))})).catch(this.handleError)}},{key:"componentWillUnmount",value:function(){var e=this.onDataChange;this.props._mgr.off({update:e,mixin:e,rows:e}),this.state._obj&&this.state._obj.is_new()&&this.state._obj.unload()}},{key:"handlePost",value:function(){return this.handleSave(!0)}},{key:"handleSave",value:function(e){var t=this,a=this.state._obj;return a?a.save("boolean"===typeof e?e:void 0).then((function(){return t.shouldComponentUpdate(t.props)})).catch((function(e){return t.props.handleIfaceState({component:"",name:"alert",value:{open:!0,title:a.presentation,text:e.reason||e.message}}),e})):Promise.resolve()}},{key:"handleClose",value:function(){var e=this.props,t=e.handlers,a=e._mgr,n=this.state._obj,l="object"===typeof $p?$p.job_prm.base:"";t.handleNavigate("".concat(l||"","/").concat(a.class_name,"/list").concat(n?"/?ref="+n.ref:""))}},{key:"handleSaveClose",value:function(){var e=this;this.handleSave().then((function(t){return"object"!==typeof t&&e.handleClose()}))}},{key:"handleMarkDeleted",value:function(){}},{key:"handleAttachments",value:function(){this.setState({_attachments:!0})}},{key:"handleCloseAttachments",value:function(){this.setState({_attachments:!1})}},{key:"handleValueChange",value:function(e){var t=this;return function(a,n){var l=t.state._obj,r=t.props.handlers,o=l[e];l[e]=n||(a&&a.target?a.target.value:""),r.handleValueChange&&r.handleValueChange(e,o)}}},{key:"renderFields",value:function(){var e=[],t=this.props.struct,a=this.state,n=a._meta,l=a._obj;if(!t){var r=["predefined_name"];for(var o in l instanceof $p.classes.DocObj?e.push(s.a.createElement(f.a,{row:!0,key:"group_sys"},s.a.createElement(W.a,{_obj:l,key:"field_number_doc",_fld:"number_doc"}),s.a.createElement(W.a,{_obj:l,key:"field_date",_fld:"date"}))):l instanceof $p.classes.CatObj&&(n.code_length&&e.push(s.a.createElement(W.a,{_obj:l,key:"field_id",_fld:"id"})),n.main_presentation_name&&e.push(s.a.createElement(W.a,{_obj:l,key:"field_name",_fld:"name"})),n.has_owners&&(e.push(s.a.createElement(W.a,{_obj:l,key:"field_owner",_fld:"owner"})),r.push("owner")),n.hierarchical&&(e.push(s.a.createElement(W.a,{_obj:l,key:"field_parent",_fld:"parent"})),r.push("parent"))),n.fields)!r.includes(o)&&e.push(s.a.createElement(W.a,{fullWidth:!0,key:"field_".concat(o),_obj:l,_fld:o}))}return 0===e.length?null:s.a.createElement(f.a,null,e)}},{key:"renderTabularSections",value:function(){var e=[],t=this.state,a=t._meta,n=t._obj;for(var l in a.tabular_sections)(e.length||Object.keys(a.fields).length)&&e.push(s.a.createElement(p.a,{light:!0,key:"dv_".concat(l)})),e.push(s.a.createElement("div",{key:"ts_".concat(l),style:{height:300}},s.a.createElement(ae.a,{_obj:n,_tabular:l})));return 0===e.length?null:s.a.createElement(f.a,null,e)}},{key:"render",value:function(){var e=this.props,t=e._mgr,a=e.classes,n=this.state,l=n._obj,r=n._meta,o=n._attachments,c=this.context,i=this._handlers,u=this.Toolbar,h=this.denyDel,d=this.readOnly,m=Object.assign({closeButton:!c.dnr,posted:l&&l.posted,deleted:l&&l.deleted,postable:!(!r.posted&&!t.metadata("posted")),deletable:!r.read_only&&!h&&!d,read_only:r.read_only||d,_obj:l},i);return l?[s.a.createElement(u,je({key:"toolbar"},m)),r.form&&r.form.obj&&r.form.obj.items?Ee.call(this,r.form.obj.items,c.customComponents):s.a.createElement(f.a,{key:"data",className:a.spaceLeft},this.renderFields(),this.renderTabularSections()),o&&s.a.createElement(y.a,{key:"attachments",open:!0,noSpace:!0,title:"\u0412\u043b\u043e\u0436\u0435\u043d\u0438\u044f /".concat(this.ltitle,"/"),onClose:i.handleCloseAttachments},s.a.createElement(ye,{_obj:l,handleClose:i.handleCloseAttachments})),s.a.createElement("div",{key:"bottom",style:{marginBottom:8}})]:s.a.createElement(j.a,null)}},{key:"ltitle",get:function(){var e=this.state,t=e._meta,a=e._obj,n=a&&a.presentation||t.obj_presentation||t.synonym;return a&&a.is_folder&&(n+=" (\u0413\u0440\u0443\u043f\u043f\u0430)"),a&&a._modified&&"*"!==n[n.length-1]&&(n+=" *"),n}},{key:"Toolbar",get:function(){return H}}]),a}(m.a);ge.propTypes={_mgr:d.a.object,_acl:d.a.string,_meta:d.a.object,match:d.a.object,classes:d.a.object,read_only:d.a.bool,handlers:d.a.object.isRequired};var ke=ge,Ce=a(79),Oe=a(25),we=a(568),Se=function(){return null},De=function(e){Object(r.a)(a,e);var t=Object(o.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state._obj;return e?s.a.createElement(we.a,{scheme:e,handleSchemeChange:Se,height:this.props.height-52}):s.a.createElement(j.a,null)}}]),a}(ke);t.default=Object(Ce.a)(Object(Oe.withIface)(De))}}]);
//# sourceMappingURL=8.26254e2b.chunk.js.map