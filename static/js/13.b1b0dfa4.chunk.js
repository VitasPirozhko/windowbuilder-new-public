(this.webpackJsonpwindowbuilder=this.webpackJsonpwindowbuilder||[]).push([[13],{1027:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return v}));var a=n(0),l=n.n(a),r=n(447),s=n(160),o=n(214),c=n.n(o),i=n(562),h=n.n(i),d=n(546),u=n(632),p=n(86);class m extends a.Component{render(){const{handleAdd:e,handleRemove:t,handleCustom:n,classes:a}=this.props;return l.a.createElement(r.a,{disableGutters:!0,className:a.bar},l.a.createElement(s.a,{title:"Добавить строку",onClick:e},l.a.createElement(c.a,null)),l.a.createElement(s.a,{title:"Удалить строку",onClick:t},l.a.createElement(h.a,null)),l.a.createElement(s.a,{key:"sep1",disabled:!0},"|"),l.a.createElement(u.a,{handleSelect:n}))}}const f=Object(p.a)(m);class v extends a.Component{constructor(...e){super(...e),this.handleCustom=e=>{this.props._obj.fill_by_order(e).then(()=>{this.production.forceUpdate()})}}render(){const{handleAdd:e,handleRemove:t,_obj:n}=this.props;return l.a.createElement(d.a,{_obj:n,_tabular:"production",ref:e=>this.production=e,minHeight:308,Toolbar:f,handleAdd:e,handleRemove:t,handleCustom:this.handleCustom})}}},554:function(e,t,n){"use strict";var a=n(12);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=a(n(0)),r=(0,a(n(13)).default)(l.default.createElement("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"ChevronLeft");t.default=r},560:function(e,t,n){"use strict";var a=n(0),l=n.n(a),r=(n(1),n(158)),s=n(206),o=n(160),c=n(524),i=n(545),h=n.n(i),d=n(554),u=n.n(d);class p extends l.a.Component{constructor(...e){super(...e),this.state={anchorEl:null},this.handleOpen=e=>{this.setState({anchorEl:e.currentTarget})},this.handleClose=()=>{this.setState({anchorEl:null})}}render(){const{props:{items:e,Icon:t,text:n,handlePrint:a,prefix:i,variant:h},state:{anchorEl:d}}=this;return["button"===h?l.a.createElement(o.a,{key:"btn_open",onClick:this.handleOpen},l.a.createElement(t,null)):l.a.createElement(s.a,{key:i+"_open",onClick:this.handleOpen},t&&l.a.createElement(c.a,null,l.a.createElement(t,null)),n),l.a.createElement(r.a,{key:i+"_menu",open:Boolean(d),anchorEl:d,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:this.handleClose},d&&e.map(e=>l.a.createElement(s.a,{key:e.ref,onClick:()=>{a(e),this.handleClose()}},e.name)))]}}class m extends p{constructor(...e){super(...e),this.state={anchorEl:null,plates:[]}}componentDidMount(){const{_mgr:e}=this.props.scheme.child_meta();e&&e.printing_plates().then(e=>{const t=new Map;for(const n in e){const a=e[n],l=a.name.includes("/")?a.name.substr(0,a.name.indexOf("/")).trim():"Общее";t.get(l)||t.set(l,[]),t.get(l).push(a)}e=[],t.forEach((t,n)=>e.push({name:n,value:t})),this.setState({plates:e})})}render(){const{props:{handlePrint:e,variant:t},state:{anchorEl:n,plates:a}}=this;return 1===a.length?l.a.createElement(p,{items:a[0].value,Icon:h.a,text:"Печать",handlePrint:e,prefix:"root",variant:t}):["button"===t?l.a.createElement(o.a,{key:"btn_open",onClick:this.handleOpen},l.a.createElement(h.a,null)):l.a.createElement(s.a,{key:"prn_open",onClick:this.handleOpen},l.a.createElement(c.a,null,l.a.createElement(h.a,null)),"Печать"),l.a.createElement(r.a,{key:"prn_menu",open:Boolean(n),anchorEl:n,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:this.handleClose},n&&a.map((t,n)=>l.a.createElement(p,{key:"prn_"+n,items:t.value,Icon:u.a,text:t.name,handlePrint:e,prefix:"prn_"+n})))]}}m.propTypes={},t.a=m},561:function(e,t,n){"use strict";var a=n(12);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=a(n(0)),r=(0,a(n(13)).default)(l.default.createElement("path",{d:"M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6h-1.5z"}),"AttachFile");t.default=r},562:function(e,t,n){"use strict";var a=n(12);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=a(n(0)),r=(0,a(n(13)).default)(l.default.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");t.default=r},632:function(e,t,n){"use strict";var a=n(0),l=n.n(a),r=n(160),s=n(633),o=n.n(s),c=n(85),i=n(603);class h extends a.Component{constructor(e,t){super(e,t),this.handleTouchTap=e=>{e.preventDefault(),this.setState({open:!0})},this.handleRequestClose=()=>{this.setState({open:!1})},this.handleSelect=(e,t)=>{this.handleRequestClose(),this.props.handleSelect(e,t)},this.find_rows=e=>{const{remote:t,props:n}=$p.adapters.pouch,{username:a,password:l}=t.doc.__opts.auth;e.sort=[{date:"desc"}];const r=new Headers;r.append("Authorization","Basic "+btoa(unescape(encodeURIComponent(a+":"+l)))),r.append("suffix",n._suffix||"0");const s={method:"post",credentials:"include",headers:r,body:JSON.stringify(e)};return fetch("/r/_find",s).then(e=>e.status<=201?e.json():e.text().then(t=>{throw new Error(`${e.statusText}: ${t}`)})).then(e=>(e.docs.forEach(e=>{e.ref=e._id.split("|")[1],delete e._id}),e))},this.state={open:!1}}render(){const{handleSelect:e,props:t,state:n}=this;return l.a.createElement("div",null,l.a.createElement(r.a,{title:"Добавить из заказа",onClick:this.handleTouchTap},l.a.createElement(o.a,null)),n.open&&l.a.createElement(c.a,{open:!0,noSpace:!0,large:!0,title:"Добавить из заказа",onClose:this.handleRequestClose},l.a.createElement(i.a,{height:480,_mgr:$p.doc.calc_order,_acl:t._acl,handlers:{handleSelect:e},selectionMode:!0,denyAddDel:!0,show_search:!0})))}}t.a=h},633:function(e,t,n){"use strict";var a=n(12);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=a(n(0)),r=(0,a(n(13)).default)(l.default.createElement("path",{d:"M20 6h-4V4c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-6 0h-4V4h4v2z"}),"Work");t.default=r}}]);
//# sourceMappingURL=13.b1b0dfa4.chunk.js.map