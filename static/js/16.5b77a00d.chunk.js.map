{"version":3,"sources":["components/CalcOrder/AdditionsExt/CustomToolbar.js","components/CalcOrder/AdditionsExt/Production.js","components/CalcOrder/AdditionsExt/ExtProp.js","components/CalcOrder/AdditionsExt/Params.js","components/CalcOrder/AdditionsExt/Additions.js","components/CalcOrder/AdditionsExt/index.js","components/CalcOrder/AdditionsExt/Parametric.js","components/CalcOrder/Additions/AdditionsItem.js","components/CalcOrder/Additions/connect.js","components/CalcOrder/Additions/styles.js","../node_modules/@material-ui/icons/Delete.js","components/CalcOrder/Additions/Frame.js"],"names":["CustomToolbar","handleAdd","handleRemove","count","disableGutters","IconButton","title","onClick","disabled","Production","React","Component","constructor","props","super","cellSelect","idx","rowIdx","tabular","selectedRow","this","row","rowGetter","onSelect","cellDeSelect","bind","state","dp","production","render","scheme","meta","minHeight","style","height","TabularSection","ref","el","_obj","_meta","_tabular","onCellSelected","onCellDeSelected","Toolbar","PropField","param","handleValueChange","id","_fld","valueOf","Object","assign","fields","types","type","oselect","length","grid","selection","cnstr","links","params_links","obj","hide","show_calculated","is_calculated","some","link","values","prow","_owner","product_params","find","elm","linked_values","choice_params","push","name","path","in","map","v","value","DataField","ctrl_type","isTabular","Params","_refs","changed","timer","clearTimeout","setTimeout","forceUpdate","componentWillUnmount","inset","Typography","variant","color","presentation","res","key","struct","Map","elm_positions","$p","enm","forEach","pos","empty","get","set","eProp","i","hasOwnProperty","ExtProp","frame","top","FormGroup","column","bottom","Additions","context","inset_change","prototype","call","setState","setProduct","value_change","group","inserts_types","Параметрик","items","componentDidMount","fill_data","dialog","cat","fill_schemas","scheme_settings","find_rows","user","buyers_order","on","off","schemas","components","ext","Parametric","Frame","Content","AdditionsItem","tref","onRowUpdated","hideToolbar","ItemData","inserts","additions_groups","create","calc_order","doc","by_ref","_data","_loading","ordn","utils","blank","guid","characteristic","origin","indexOf","insert_type","cmp","params","add","clr","len","width","quantity","note","ProductionRow","docs","item","find_inset","_grid","selectCell","msg","show_msg","text","calc_order_row","del","_inset","metadata","filter","reduce","curr","next","priority","compose","withStyles","connect","handleCalck","additions","process_add_product_list","then","sync_grid","wnd","elmnts","grids","handleCancel","handlers","handleIfaceState","component","theme","entered","secondary","marginTop","spacing","groupTitle","fontWeight","listitem","paddingTop","paddingBottom","_interopRequireDefault","require","defineProperty","exports","default","_react","_default","createElement","d","ParametricFrame","handleOk","catch","err","message","handleErrClose","queryClose","actions","open","initFullScreen","large","onClose","ok","calck","toLowerCase"],"mappings":"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","file":"static/js/16.5b77a00d.chunk.js","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport AddIcon from '@material-ui/icons/AddCircleOutline';\r\nimport RemoveIcon from '@material-ui/icons/Delete';\r\n\r\nexport default function CustomToolbar({handleAdd, handleRemove, count}) {\r\n  return <Toolbar disableGutters>\r\n    <IconButton title=\"Добавить строку\" onClick={handleAdd}><AddIcon/></IconButton>\r\n    <IconButton title=\"Удалить строку\" disabled={!count} onClick={handleRemove}><RemoveIcon/></IconButton>\r\n  </Toolbar>;\r\n}\r\n\r\nCustomToolbar.propTypes = {\r\n  handleAdd: PropTypes.func.isRequired,\r\n  handleRemove: PropTypes.func.isRequired,\r\n  count: PropTypes.number.isRequired,\r\n};\r\n","/**\r\n * ### Табчасть параметрических продукций\r\n *\r\n * @module Production\r\n *\r\n * Created by Evgeniy Malyarov on 22.07.2019.\r\n */\r\n\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport TabularSection from 'metadata-react/TabularSection';\r\nimport {handleAdd, handleRemove} from '../Additions/connect';\r\nimport CustomToolbar from './CustomToolbar';\r\n\r\nclass Production extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.selectedRow = null;\r\n    this.handleAdd = handleAdd.bind(this);\r\n    this.handleRemove = handleRemove.bind(this);\r\n    this.state = {count: props.dp.production.count()};\r\n  }\r\n\r\n  cellSelect = ({idx, rowIdx}) => {\r\n    const {tabular, props, selectedRow} = this;\r\n    const row = tabular && tabular.rowGetter(rowIdx);\r\n    if(row !== selectedRow) {\r\n      this.selectedRow = row;\r\n      props.onSelect(row, idx);\r\n    }\r\n  };\r\n\r\n  cellDeSelect = () => {\r\n    if(this.selectedRow) {\r\n      this.selectedRow = null;\r\n      this.props.onSelect(null);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const {props, state: {count}} = this;\r\n    const {dp, scheme, meta} = props;\r\n    let minHeight = 120;\r\n    if(count) {\r\n      minHeight += (33 * ((count < 8 ? count : 8) - 1));\r\n    }\r\n\r\n    const Toolbar = () => {\r\n      return <CustomToolbar handleAdd={this.handleAdd} handleRemove={this.handleRemove} count={count}/>;\r\n    };\r\n\r\n    return <div style={{height: minHeight + 35}}>\r\n      <TabularSection\r\n        ref={(el) => this.tabular = el}\r\n        _obj={dp}\r\n        _meta={meta}\r\n        _tabular=\"production\"\r\n        scheme={scheme}\r\n        onCellSelected={this.cellSelect}\r\n        onCellDeSelected={this.cellDeSelect}\r\n        minHeight={minHeight}\r\n        Toolbar={Toolbar}\r\n      />\r\n    </div>;\r\n  }\r\n}\r\n\r\nProduction.propTypes = {\r\n  dp: PropTypes.object.isRequired,\r\n  scheme: PropTypes.object.isRequired,\r\n  meta: PropTypes.object.isRequired,\r\n  onSelect: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Production;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport DataField from 'metadata-react/DataField';\r\n//import withStyles, {extClasses} from 'metadata-react/DataField/stylesPropertyGrid';\r\n\r\nfunction PropField({row, param, meta, handleValueChange, id, ...props}) {\r\n\r\n  const _fld = param.valueOf();\r\n  const _meta = Object.assign({}, meta.fields[_fld]);\r\n  const {types} = param.type;\r\n  let oselect = types.length === 1 && types[0] === 'cat.property_values';\r\n\r\n  const grid = {selection: {cnstr: row.row}};\r\n  const links = param.params_links({grid, obj: row});\r\n\r\n  // вычисляемые скрываем всегда\r\n  let hide = !param.show_calculated && param.is_calculated;\r\n  // если для параметра есть связи - сокрытие по связям\r\n  if(!hide && links.length){\r\n    hide = links.some((link) => link.hide);\r\n  }\r\n  if(hide) {\r\n    return null;\r\n  }\r\n\r\n  // проверим вхождение значения в доступные и при необходимости изменим\r\n  if (links.length) {\r\n    const values = [];\r\n    const prow = row._owner._owner.product_params.find({elm: row.row, param});\r\n    if(prow && param.linked_values(links, prow, values)) {\r\n      handleValueChange(id);\r\n    }\r\n    if(values.length) {\r\n      if(values.length < 50) {\r\n        oselect = true;\r\n      }\r\n      if(!_meta.choice_params) {\r\n        _meta.choice_params = [];\r\n      }\r\n      // дополняем отбор\r\n      _meta.choice_params.push({\r\n        name: 'ref',\r\n        path: {in: values.map((v) => v.value)}\r\n      });\r\n    }\r\n  }\r\n\r\n  return <DataField\r\n    _obj={row}\r\n    _fld={_fld}\r\n    _meta={_meta}\r\n    ctrl_type={oselect ? 'oselect' : void 0}\r\n    handleValueChange={() => handleValueChange(id)}\r\n    isTabular={false}\r\n    {...props}\r\n  />;\r\n}\r\n\r\nPropField.propTypes = {\r\n  handleValueChange: PropTypes.func,\r\n  row: PropTypes.object,\r\n  param: PropTypes.object,\r\n  meta: PropTypes.object,\r\n  id: PropTypes.string,\r\n};\r\n\r\nexport default PropField;\r\n","/**\r\n * ### Панель параметров текущего изделия\r\n *\r\n * @module Params\r\n *\r\n * Created by Evgeniy Malyarov on 22.07.2019.\r\n */\r\n\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport FormGroup from '@material-ui/core/FormGroup';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport ExtProp from './ExtProp';\r\n\r\nexport default class Params extends React.Component {\r\n\r\n  _refs = {};\r\n\r\n  handleValueChange = (changed) => {\r\n    this.timer && clearTimeout(this.timer);\r\n    this.timer = setTimeout(() => {\r\n      this._refs[changed] -= 1;\r\n      this.forceUpdate();\r\n    }, 100);\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    this.timer && clearTimeout(this.timer);\r\n  }\r\n\r\n  render() {\r\n    const {row, inset, meta} = this.props;\r\n    if(!row) {\r\n      return <Typography variant=\"subtitle1\" color=\"secondary\">Нет параметров, либо не выбрана строка продукции</Typography>;\r\n    }\r\n\r\n    const {product_params, presentation} = inset;\r\n    const res = [<Typography key=\"title\" variant=\"subtitle1\" color=\"primary\">{`Параметры ${presentation}`}</Typography>];\r\n    const struct = new Map();\r\n    const {elm_positions} = $p.enm;\r\n    product_params.forEach((row) => {\r\n      if(row.pos.empty()) return;\r\n      if(!struct.get(row.pos)) {\r\n        struct.set(row.pos, []);\r\n      }\r\n      struct.get(row.pos).push(row);\r\n    });\r\n\r\n    const eProp = (v, i) => {\r\n      const id = `${v.param.ref}-${i}`;\r\n      if(!this._refs.hasOwnProperty(id)) {\r\n        this._refs[id] = 0;\r\n      }\r\n      this._refs[id] += 1;\r\n      return <ExtProp key={`${id}-${this._refs[id]}`} id={id} row={row} param={v.param} meta={meta} handleValueChange={this.handleValueChange}/>;\r\n    };\r\n\r\n    let frame = struct.get(elm_positions.top);\r\n    if(frame) {\r\n      res.push(<FormGroup key=\"top\" row>{frame.map(eProp)}</FormGroup>);\r\n    }\r\n\r\n    if([1,2,3].some((v) => struct.get(elm_positions[`column${v}`]))) {\r\n      res.push(<FormGroup key=\"columns\" row>\r\n        {[1,2,3].map((v) => {\r\n          const column = struct.get(elm_positions[`column${v}`]);\r\n          if(!column) return null;\r\n          return <FormGroup key={`column${v}`}>{column.map(eProp)}</FormGroup>;\r\n        })}\r\n      </FormGroup>);\r\n    }\r\n\r\n    frame = struct.get(elm_positions.bottom);\r\n    if(frame) {\r\n      res.push(<FormGroup key=\"bottom\" row>{frame.map(eProp)}</FormGroup>);\r\n    }\r\n\r\n    return res;\r\n\r\n  }\r\n}\r\n\r\nParams.propTypes = {\r\n  row: PropTypes.object,\r\n  inset: PropTypes.object,\r\n  meta: PropTypes.object,\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Production from './Production';\r\nimport Params from './Params';\r\nimport FormGroup from '@material-ui/core/FormGroup';\r\nimport {fill_data, fill_schemas} from '../Additions/connect';\r\n\r\nclass Additions extends React.Component {\r\n\r\n  constructor(props, context) {\r\n    super(props, context);\r\n    this.group = $p.enm.inserts_types.Параметрик;\r\n    this.items = [this.group];\r\n    this.state = {row: null, inset: null};\r\n  }\r\n\r\n  componentDidMount() {\r\n    fill_data.call(this, this.props.dialog.ref, [this.group]);\r\n    const {cat, dp} = $p;\r\n    fill_schemas.call(this, cat.scheme_settings.find_rows({obj: 'dp.buyers_order.production', user: ''}));\r\n    dp.buyers_order.on('update', this.inset_change);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    $p.dp.buyers_order.off('update', this.inset_change);\r\n  }\r\n\r\n  inset_change = (obj, fields) => {\r\n    if(Object.prototype.hasOwnProperty.call(fields, 'inset')) {\r\n      this.setState({inset: obj.inset});\r\n    }\r\n  };\r\n\r\n  setProduct = (row) => {\r\n    const {inset} = row || {};\r\n    if(row && this.state.inset != inset) {\r\n      row.value_change('inset', '', inset);\r\n    }\r\n    this.setState({row, inset});\r\n  };\r\n\r\n  render() {\r\n    const {state: {schemas, row, inset}, props, dp, components, group} = this;\r\n    const ext = schemas && Object.assign({}, components.get(group), row && row._meta && {meta: row._meta});\r\n    return schemas ?\r\n      <FormGroup>\r\n        <Production\r\n          dp={dp}\r\n          group={group}\r\n          {...ext}\r\n          scheme={schemas.get(group)}\r\n          onSelect={this.setProduct}\r\n        />\r\n        <Params\r\n          dp={dp}\r\n          row={row}\r\n          inset={inset}\r\n          {...ext}\r\n          {...props}\r\n        />\r\n      </FormGroup>\r\n      :\r\n      <div>Чтение настроек компоновки...</div>;\r\n  }\r\n}\r\n\r\nAdditions.propTypes = {\r\n  dialog: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default Additions;\r\n","import Parametric from './Parametric';\r\n\r\nexport default Parametric;\r\n","/**\r\n * ### Форма редактирования параметрических изделий\r\n *\r\n * Created by Evgeniy Malyarov on 22.07.2019.\r\n */\r\n\r\nimport React from 'react';\r\nimport Frame from '../Additions/Frame';\r\nimport Additions from './Additions';\r\n\r\nexport default function Parametric(props) {\r\n  return <Frame Content={Additions} title=\"Параметрические изделия\" {...props} />;\r\n}\r\n","/**\r\n * ### Форма добавления услуг и комплектуюущих\r\n * Абстрактная строка допвставки - от неё наследуются строки подоконников, отливов и т.д.\r\n *\r\n * Created by Evgeniy Malyarov on 13.11.2017.\r\n */\r\n\r\nimport React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\n//import {FormGroup} from '@material-ui/core/Form';\r\nimport TabularSection from 'metadata-react/TabularSection';\r\n\r\nexport default class AdditionsItem extends Component {\r\n\r\n  render() {\r\n    const {dp, meta, scheme, tref, onRowUpdated, onCellSelected, minHeight} = this.props;\r\n\r\n    return <TabularSection\r\n      ref={tref}\r\n      _obj={dp}\r\n      _meta={meta}\r\n      _tabular=\"production\"\r\n      scheme={scheme}\r\n      onRowUpdated={onRowUpdated}\r\n      onCellSelected={onCellSelected}\r\n      minHeight={minHeight}\r\n      hideToolbar\r\n    />;\r\n  }\r\n\r\n}\r\n\r\nAdditionsItem.propTypes = {\r\n  dp: PropTypes.object.isRequired,\r\n  scheme: PropTypes.object.isRequired,\r\n  meta: PropTypes.object.isRequired,\r\n  tref: PropTypes.func.isRequired,\r\n  onRowUpdated: PropTypes.func.isRequired,\r\n  onCellSelected: PropTypes.func.isRequired,\r\n  minHeight: PropTypes.number,\r\n};\r\n","/**\r\n * ### Форма добавления услуг и комплектуюущих\r\n * обработчики событий и модификаторы данных\r\n *\r\n * Created by Evgeniy Malyarov on 13.11.2017.\r\n */\r\n\r\nimport {connect} from 'react-redux';\r\nimport withStyles from './styles';\r\nimport {compose} from 'redux';\r\n\r\nimport AdditionsItem from './AdditionsItem';\r\nconst {ItemData} = $p.cat.inserts;\r\n\r\n\r\n// заполняет компонент данными\r\nexport function fill_data(ref, items) {\r\n\r\n  if(!items) {\r\n    items = this.items = $p.enm.inserts_types.additions_groups;\r\n  }\r\n  const dp = this.dp = $p.dp.buyers_order.create();\r\n  dp.calc_order = $p.doc.calc_order.by_ref[ref];\r\n  const components = this.components = new Map();\r\n  items.forEach(v => components.set(v, new ItemData(v, AdditionsItem)));\r\n\r\n  const {production, product_params} = dp;\r\n\r\n  // фильтруем по пустой ведущей продукции\r\n  dp._data._loading = true;\r\n  dp.calc_order.production.find_rows({ordn: $p.utils.blank.guid}, (row) => {\r\n    const {characteristic} = row;\r\n    const {origin} = characteristic;\r\n    // фильтруем по типу вставки\r\n    if(!characteristic.empty() && origin && !origin.empty() && items.indexOf(origin.insert_type) != -1) {\r\n      const cmp = components.get(origin.insert_type);\r\n      // добавляем параметры\r\n      const elm = production.count() + 1;\r\n      characteristic.params.forEach(({param, value}) => {\r\n        product_params.add({elm, param, value});\r\n      });\r\n      // добавляем строку продукции\r\n      production.add({\r\n        characteristic,\r\n        inset: origin,\r\n        clr: characteristic.clr,\r\n        len: row.len,\r\n        height: row.width,\r\n        quantity: row.quantity,\r\n        note: row.note,\r\n      }, false, cmp.ProductionRow);\r\n      // счетчик строк данного типа\r\n      cmp.count++;\r\n    }\r\n  });\r\n  dp._data._loading = false;\r\n}\r\n\r\n// заполняет соответствие схем и типов вставок в state компонента\r\nexport function fill_schemas(docs = []) {\r\n  const schemas = new Map();\r\n  for (const doc of docs) {\r\n    for (const item of this.items) {\r\n      if(item && doc.name == item.name) {\r\n        schemas.set(item, doc);\r\n        break;\r\n      }\r\n    }\r\n  }\r\n  this.setState({schemas});\r\n}\r\n\r\nexport function handleAdd() {\r\n  const {tabular, props} = this;\r\n  const inset = find_inset.call(this, props.group);\r\n  if(inset && tabular) {\r\n    const {_data} = tabular.state._tabular._owner;\r\n    _data._loading = true;\r\n    const row = tabular.state._tabular.add({inset, quantity: 1}, false, props.ProductionRow);\r\n    _data._loading = false;\r\n    row.value_change('inset', 'force', row.inset);\r\n    this.setState({\r\n      count: this.state.count + 1,\r\n    });\r\n\r\n    //selectRow\r\n    if(inset.insert_type == $p.enm.inserts_types.Параметрик) {\r\n      for(let i = 0; i < row.row; i++) {\r\n        if(tabular.rowGetter(i) === row) {\r\n          setTimeout(() => tabular._grid.selectCell({rowIdx: i, idx: 0}, true));\r\n          break;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  else {\r\n    $p.msg.show_msg({\r\n      type: 'alert-info',\r\n      text: `Нет вставки подходящего типа (${props.group})`,\r\n      title: 'Новая строка'\r\n    });\r\n  }\r\n}\r\n\r\nexport function handleRemove() {\r\n  const {props, tabular, state, selectedRow} = this;\r\n  if(tabular && selectedRow){\r\n    const {calc_order_row} = selectedRow.characteristic;\r\n    selectedRow._owner.del(selectedRow);\r\n    this.selectedRow = null;\r\n    tabular.forceUpdate();\r\n    if(state.count) {\r\n      this.setState({\r\n        count: state.count - 1,\r\n      });\r\n    }\r\n    if(calc_order_row){\r\n      calc_order_row._owner.del(calc_order_row);\r\n    }\r\n    props.onSelect && props.onSelect(null);\r\n  }\r\n  else{\r\n    $p.msg.show_msg({\r\n      type: 'alert-info',\r\n      text: `Укажите строку для удаления (${props.group})`,\r\n      title: 'Удаление строки'\r\n    });\r\n  }\r\n}\r\n\r\n\r\n// ищет первую, наиболее приоритетную вставку данного типа\r\nexport function find_inset(insert_type) {\r\n  if(!this._inset) {\r\n    const {choice_params} = $p.dp.buyers_order.metadata('production').fields.inset;\r\n    const filter = {insert_type};\r\n    choice_params && choice_params.forEach(({name, path}) => {\r\n      if(name === 'insert_type') {\r\n        return;\r\n      }\r\n      if(Object.prototype.hasOwnProperty.call(filter, name)) {\r\n        filter[name] = [filter[name]];\r\n        filter[name].push(path);\r\n      }\r\n      else {\r\n        filter[name] = path;\r\n      }\r\n    });\r\n    this._inset = $p.cat.inserts.find_rows(filter)\r\n      .reduce((curr, next) => curr && curr.priority >= next.priority ? curr : next, null);\r\n  }\r\n  return this._inset;\r\n}\r\n\r\nfunction mapStateToProps(state, props) {\r\n  return {\r\n    handleCalck() {\r\n      const {additions} = this;\r\n      const {dp} = additions;\r\n      return dp ?\r\n        dp.calc_order.process_add_product_list(dp)\r\n          .then(() => {\r\n            dp.calc_order.production.sync_grid(props.dialog.wnd.elmnts.grids.production);\r\n          })\r\n        :\r\n        additions.handleCalck();\r\n    },\r\n    handleCancel() {\r\n      props.handlers.handleIfaceState({\r\n        component: 'DataObjPage',\r\n        name: 'dialog',\r\n        value: null,\r\n      });\r\n    }\r\n  };\r\n}\r\n\r\n// function mapDispatchToProps(dispatch) {\r\n//   return {};\r\n// }\r\n\r\nexport default compose(\r\n  withStyles,\r\n  connect(mapStateToProps /*, mapDispatchToProps */),\r\n);\r\n","/**\r\n * ### Форма добавления услуг и комплектуюущих\r\n * стили оформления\r\n *\r\n * Created by Evgeniy Malyarov on 13.11.2017.\r\n */\r\n\r\nimport {withStyles} from '@material-ui/styles';\r\n\r\nconst styles = theme => ({\r\n  entered: {\r\n    minHeight: 120,\r\n  },\r\n  secondary: {\r\n    marginTop: -theme.spacing(1.5),\r\n  },\r\n  groupTitle: {\r\n    fontWeight: 'bold',\r\n  },\r\n  listitem: {\r\n    paddingTop: theme.spacing(),\r\n    paddingBottom: theme.spacing(),\r\n  }\r\n});\r\n\r\nexport default withStyles(styles);\r\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(\"path\", {\n  d: \"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z\"\n}), 'Delete');\n\nexports.default = _default;","/**\r\n * ### Диалог редактирования параметрических изделий\r\n *\r\n * @module Frame\r\n *\r\n * Created by Evgeniy Malyarov on 22.07.2019.\r\n */\r\n\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from 'metadata-react/App/Dialog';\r\n\r\nimport connect from './connect';\r\n\r\nclass ParametricFrame extends React.Component {\r\n\r\n  constructor(props, context) {\r\n    super(props, context);\r\n    const {handleCancel} = props;\r\n    this.handleCancel = handleCancel.bind(this);\r\n    this.state = {msg: null, queryClose: false};\r\n  }\r\n\r\n  handleOk = () => {\r\n    this.props.handleCalck.call(this)\r\n      .then(this.handleCancel)\r\n      .catch((err) => {\r\n        this.setState({msg: err.msg || err.message});\r\n      });\r\n  };\r\n\r\n  handleCalck = () => {\r\n    this.props.handleCalck.call(this)\r\n      .catch((err) => {\r\n        this.setState({msg: err.msg});\r\n      });\r\n  };\r\n\r\n  handleErrClose = () => {\r\n    this.setState({msg: null, queryClose: false});\r\n  };\r\n\r\n  queryClose = () => {\r\n    this.setState({queryClose: true});\r\n  };\r\n\r\n  render() {\r\n\r\n    const {handleCancel, handleErrClose, props: {dialog, title, actions, Content}, state: {msg, queryClose}} = this;\r\n\r\n    return <Dialog\r\n      open\r\n      initFullScreen\r\n      large\r\n      title={title}\r\n      onClose={this.queryClose}\r\n      actions={[\r\n        !actions && <Button key=\"ok\" onClick={this.handleOk} color=\"primary\">Рассчитать и закрыть</Button>,\r\n        actions && actions.ok && <Button key=\"ok\" onClick={this.handleOk} color=\"primary\">{actions.ok}</Button>,\r\n        !actions && <Button key=\"calck\" onClick={this.handleCalck} color=\"primary\">Рассчитать</Button>,\r\n        actions && actions.calck && <Button key=\"calck\" onClick={this.handleCalck} color=\"primary\">{actions.calck}</Button>,\r\n        <Button key=\"cancel\" onClick={handleCancel} color=\"primary\">Закрыть</Button>\r\n      ]}\r\n    >\r\n      <Content ref={(el) => this.additions = el} dialog={dialog}/>\r\n      {msg && <Dialog\r\n        open\r\n        title={msg.title || 'Ошибка при записи'}\r\n        onClose={handleErrClose}\r\n        actions={[\r\n          <Button key=\"ok\" onClick={handleErrClose} color=\"primary\">Ок</Button>,\r\n        ]}\r\n      >\r\n        {msg.obj && <div>{msg.obj.name}</div>}\r\n        {msg.text || msg}\r\n      </Dialog>}\r\n      {queryClose && <Dialog\r\n        open\r\n        title={`Закрыть ${title.toLowerCase()}?`}\r\n        onClose={handleErrClose}\r\n        actions={[\r\n          <Button key=\"ok\" onClick={handleCancel} color=\"primary\">Ок</Button>,\r\n          <Button key=\"cancel\" onClick={handleErrClose} color=\"primary\">Отмена</Button>\r\n        ]}\r\n      >\r\n        Внесённые изменения будут потеряны\r\n      </Dialog>}\r\n    </Dialog>;\r\n\r\n  }\r\n}\r\n\r\nParametricFrame.propTypes = {\r\n  Content: PropTypes.oneOfType([PropTypes.object, PropTypes.func]).isRequired,\r\n  title: PropTypes.string.isRequired,\r\n  dialog: PropTypes.object.isRequired,\r\n  actions: PropTypes.object,\r\n  handlers: PropTypes.object.isRequired,\r\n  handleCalck: PropTypes.func.isRequired,\r\n  handleCancel: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default connect(ParametricFrame);\r\n"],"sourceRoot":""}