{"version":3,"sources":["components/RepMaterialsDemand/RepParams.js","../node_modules/@material-ui/icons/ChevronLeft.js","../node_modules/metadata-react/DynList/MenuPrint.js","../node_modules/@material-ui/icons/AttachFile.js","../node_modules/@material-ui/icons/Delete.js","components/RepMaterialsDemand/SelectOrder.js","../node_modules/@material-ui/icons/Work.js"],"names":["SettingsToolbar","Component","render","handleAdd","handleRemove","handleCustom","classes","this","props","disableGutters","className","bar","title","onClick","key","disabled","handleSelect","StyledToolbar","withStyles","RepParams","row","_obj","fill_by_order","then","production","forceUpdate","_tabular","ref","el","minHeight","Toolbar","_interopRequireDefault","require","Object","defineProperty","exports","value","default","_react","_default","createElement","d","SubMenu","React","constructor","args","super","state","anchorEl","handleOpen","event","setState","currentTarget","handleClose","items","Icon","text","handlePrint","prefix","variant","IconButton","MenuItem","ListItemIcon","Menu","open","Boolean","anchorOrigin","vertical","horizontal","transformOrigin","onClose","map","v","name","MenuPrint","plates","componentDidMount","_mgr","scheme","child_meta","printing_plates","groups","Map","plate","group","includes","substr","indexOf","trim","get","set","push","forEach","length","PrintIcon","index","ChevronLeft","propTypes","SelectOrder","context","handleTouchTap","preventDefault","handleRequestClose","find_rows","selector","remote","$p","adapters","pouch","username","password","doc","__opts","auth","sort","date","headers","Headers","append","btoa","unescape","encodeURIComponent","_suffix","opts","method","credentials","body","JSON","stringify","fetch","res","status","json","Error","statusText","data","docs","_id","split","noSpace","large","height","calc_order","_acl","handlers","selectionMode","denyAddDel","show_search"],"mappings":"kHAAA,mJAgBA,MAAMA,UAAwBC,YAS5BC,SAEE,MAAM,UAACC,EAAD,aAAYC,EAAZ,aAA0BC,EAA1B,QAAwCC,GAAWC,KAAKC,MAE9D,OAEE,kBAAC,IAAD,CAASC,gBAAc,EAACC,UAAWJ,EAAQK,KACzC,kBAAC,IAAD,CAAYC,MAAM,kBAAkBC,QAASV,GAAW,kBAAC,IAAD,OACxD,kBAAC,IAAD,CAAYS,MAAM,iBAAiBC,QAAST,GAAc,kBAAC,IAAD,OAC1D,kBAAC,IAAD,CAAYU,IAAI,OAAOC,UAAQ,GAA/B,KACA,kBAAC,IAAD,CAAaC,aAAcX,MAMnC,MAAMY,EAAgBC,YAAWlB,GAElB,MAAMmB,UAAkBlB,YAAW,eAAD,oBAQ/CI,aAAgBe,IACdb,KAAKC,MAAMa,KAAKC,cAAcF,GAC3BG,KAAK,KACJhB,KAAKiB,WAAWC,iBAItBvB,SAEE,MAAM,UAACC,EAAD,aAAYC,EAAZ,KAA0BiB,GAAQd,KAAKC,MAE7C,OAEE,kBAAC,IAAD,CACEa,KAAMA,EACNK,SAAS,aACTC,IAAMC,GAAOrB,KAAKiB,WAAaI,EAC/BC,UAAW,IACXC,QAASb,EACTd,UAAWA,EACXC,aAAcA,EACdC,aAAcE,KAAKF,kB,iCCtE3B,IAAI0B,EAAyBC,EAAQ,IAErCC,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAETD,EAAQE,aAAU,EAElB,IAAIC,EAASP,EAAuBC,EAAQ,IAIxCO,GAAW,EAFMR,EAAuBC,EAAQ,KAElBK,SAASC,EAAOD,QAAQG,cAAc,OAAQ,CAC9EC,EAAG,kDACD,eAEJN,EAAQE,QAAUE,G,iCCjBlB,mGAgBA,MAAMG,UAAgBC,IAAM1C,UAC1B2C,eAAeC,GACbC,SAASD,GACTtC,KAAKwC,MAAQ,CACXC,SAAU,MAGZzC,KAAK0C,WAAaC,IAChB3C,KAAK4C,SAAS,CACZH,SAAUE,EAAME,iBAIpB7C,KAAK8C,YAAc,KACjB9C,KAAK4C,SAAS,CACZH,SAAU,QAKhB9C,SACE,MACEM,OAAO,MACL8C,EADK,KAELC,EAFK,KAGLC,EAHK,YAILC,EAJK,OAKLC,EALK,QAMLC,GAEFZ,OAAO,SACLC,IAEAzC,KACJ,MAAO,CAAa,WAAZoD,EAAoChB,IAAMH,cAAcoB,IAAY,CAC1E9C,IAAK,WACLD,QAASN,KAAK0C,YACAN,IAAMH,cAAce,EAAM,OAAsBZ,IAAMH,cAAcqB,IAAU,CAC5F/C,IAAQ4C,EAAF,QACN7C,QAASN,KAAK0C,YACbM,GAAqBZ,IAAMH,cAAcsB,IAAc,KAAmBnB,IAAMH,cAAce,EAAM,OAAQC,GAAoBb,IAAMH,cAAcuB,IAAM,CAC3JjD,IAAQ4C,EAAF,QACNM,KAAMC,QAAQjB,GACdA,SAAUA,EACVkB,aAAc,CACZC,SAAU,MACVC,WAAY,QAEdC,gBAAiB,CACfF,SAAU,MACVC,WAAY,SAEdE,QAAS/D,KAAK8C,aACbL,GAAYM,EAAMiB,IAAIC,GAAkB7B,IAAMH,cAAcqB,IAAU,CACvE/C,IAAK0D,EAAE7C,IACPd,QAAS,KACP4C,EAAYe,GACZjE,KAAK8C,gBAENmB,EAAEC,UAKT,MAAMC,UAAkBhC,EACtBE,eAAeC,GACbC,SAASD,GACTtC,KAAKwC,MAAQ,CACXC,SAAU,KACV2B,OAAQ,IAIZC,oBACE,MAAM,KACJC,GACEtE,KAAKC,MAAMsE,OAAOC,aACtBF,GAAQA,EAAKG,kBAAkBzD,KAAKoD,IAClC,MAAMM,EAAS,IAAIC,IAEnB,IAAK,MAAMpE,KAAO6D,EAAQ,CACxB,MAAMQ,EAAQR,EAAO7D,GACfsE,EAAQD,EAAMV,KAAKY,SAAS,KAAOF,EAAMV,KAAKa,OAAO,EAAGH,EAAMV,KAAKc,QAAQ,MAAMC,OAAS,QAE3FP,EAAOQ,IAAIL,IACdH,EAAOS,IAAIN,EAAO,IAGpBH,EAAOQ,IAAIL,GAAOO,KAAKR,GAGzBR,EAAS,GACTM,EAAOW,QAAQ,CAACxD,EAAOqC,IAASE,EAAOgB,KAAK,CAC1ClB,OACArC,WAEF7B,KAAK4C,SAAS,CACZwB,aAKNzE,SACE,MACEM,OAAO,YACLiD,EADK,QAELE,GAEFZ,OAAO,SACLC,EADK,OAEL2B,IAEApE,KAEJ,OAAsB,IAAlBoE,EAAOkB,OACWlD,IAAMH,cAAcE,EAAS,CAC/CY,MAAOqB,EAAO,GAAGvC,MACjBmB,KAAMuC,IACNtC,KAAM,SACNC,YAAaA,EACbC,OAAQ,OACRC,QAASA,IAIN,CAAa,WAAZA,EAAoChB,IAAMH,cAAcoB,IAAY,CAC1E9C,IAAK,WACLD,QAASN,KAAK0C,YACAN,IAAMH,cAAcsD,IAAW,OAAsBnD,IAAMH,cAAcqB,IAAU,CACjG/C,IAAK,WACLD,QAASN,KAAK0C,YACAN,IAAMH,cAAcsB,IAAc,KAAmBnB,IAAMH,cAAcsD,IAAW,OAAQ,UAAwBnD,IAAMH,cAAcuB,IAAM,CAC5JjD,IAAK,WACLkD,KAAMC,QAAQjB,GACdA,SAAUA,EACVkB,aAAc,CACZC,SAAU,MACVC,WAAY,QAEdC,gBAAiB,CACfF,SAAU,MACVC,WAAY,SAEdE,QAAS/D,KAAK8C,aACbL,GAAY2B,EAAOJ,IAAI,CAACY,EAAOY,IAAuBpD,IAAMH,cAAcE,EAAS,CACpF5B,IAAM,OAAMiF,EACZzC,MAAO6B,EAAM/C,MACbmB,KAAMyC,IACNxC,KAAM2B,EAAMV,KACZhB,YAAaA,EACbC,OAAS,OAAMqC,QAMrBrB,EAAUuB,UAON,GACWvB,O,iCClLf,IAAI3C,EAAyBC,EAAQ,IAErCC,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAETD,EAAQE,aAAU,EAElB,IAAIC,EAASP,EAAuBC,EAAQ,IAIxCO,GAAW,EAFMR,EAAuBC,EAAQ,KAElBK,SAASC,EAAOD,QAAQG,cAAc,OAAQ,CAC9EC,EAAG,iQACD,cAEJN,EAAQE,QAAUE,G,iCCflB,IAAIR,EAAyBC,EAAQ,IAErCC,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAETD,EAAQE,aAAU,EAElB,IAAIC,EAASP,EAAuBC,EAAQ,IAIxCO,GAAW,EAFMR,EAAuBC,EAAQ,KAElBK,SAASC,EAAOD,QAAQG,cAAc,OAAQ,CAC9EC,EAAG,kFACD,UAEJN,EAAQE,QAAUE,G,iCCjBlB,gEASA,MAAM2D,UAAoBjG,YAExB2C,YAAYpC,EAAO2F,GACjBrD,MAAMtC,EAAO2F,GADa,KAK5BC,eAAkBlD,IAEhBA,EAAMmD,iBAEN9F,KAAK4C,SAAS,CAACa,MAAM,KATK,KAY5BsC,mBAAqB,KACnB/F,KAAK4C,SAAS,CAACa,MAAM,KAbK,KAgB5BhD,aAAe,CAACI,EAAKyD,KACnBtE,KAAK+F,qBACL/F,KAAKC,MAAMQ,aAAaI,EAAKyD,IAlBH,KAqB5B0B,UAAaC,IACX,MAAM,OAACC,EAAD,MAASjG,GAASkG,GAAGC,SAASC,OAC9B,SAACC,EAAD,SAAWC,GAAYL,EAAOM,IAAIC,OAAOC,KAE/CT,EAASU,KAAO,CAAC,CAACC,KAAM,SAExB,MAAMC,EAAU,IAAIC,QACpBD,EAAQE,OAAO,gBAAiB,SAAWC,KAAKC,SAASC,mBAAmBZ,EAAW,IAAMC,MAC7FM,EAAQE,OAAO,SAAU9G,EAAMkH,SAAW,KAC1C,MAAMC,EAAO,CACXC,OAAQ,OACRC,YAAa,UACbT,UACAU,KAAMC,KAAKC,UAAUxB,IAGvB,OAAOyB,MAAM,WAAYN,GACtBpG,KAAM2G,GACFA,EAAIC,QAAU,IACRD,EAAIE,OAGJF,EAAI1E,OACRjC,KAAMiC,IACL,MAAM,IAAI6E,MAAO,GAAEH,EAAII,eAAe9E,QAI7CjC,KAAMgH,IACLA,EAAKC,KAAK5C,QAASmB,IACjBA,EAAIpF,IAAMoF,EAAI0B,IAAIC,MAAM,KAAK,UACtB3B,EAAI0B,MAENF,KApDXhI,KAAKwC,MAAQ,CAACiB,MAAM,GAwDtB9D,SAEE,MAAM,aAACc,EAAD,MAAeR,EAAf,MAAsBuC,GAASxC,KAErC,OACE,6BACE,kBAAC,IAAD,CAAYK,MAAM,qBAAqBC,QAASN,KAAK6F,gBACnD,kBAAC,IAAD,OAEDrD,EAAMiB,MAAQ,kBAAC,IAAD,CACbA,MAAI,EACJ2E,SAAO,EACPC,OAAK,EAELhI,MAAM,qBACN0D,QAAS/D,KAAK+F,oBAEd,kBAAC,IAAD,CACEuC,OAAQ,IACRhE,KAAM6B,GAAGK,IAAI+B,WACbC,KAAMvI,EAAMuI,KACZC,SAAU,CAAChI,gBAEXiI,eAAa,EACbC,YAAU,EAEVC,aAAW,OAYRjD,O,iCCzGf,IAAInE,EAAyBC,EAAQ,IAErCC,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAETD,EAAQE,aAAU,EAElB,IAAIC,EAASP,EAAuBC,EAAQ,IAIxCO,GAAW,EAFMR,EAAuBC,EAAQ,KAElBK,SAASC,EAAOD,QAAQG,cAAc,OAAQ,CAC9EC,EAAG,4JACD,QAEJN,EAAQE,QAAUE","file":"static/js/13.b1b0dfa4.chunk.js","sourcesContent":["/**\r\n * Индивидуальная форма настроек отчета\r\n */\r\n\r\nimport React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport AddIcon from '@material-ui/icons/AddCircleOutline';\r\nimport RemoveIcon from '@material-ui/icons/Delete';\r\nimport TabularSection from 'metadata-react/TabularSection';\r\nimport SelectOrder from './SelectOrder';\r\n\r\nimport withStyles from 'metadata-react/Header/toolbar';\r\n\r\nclass SettingsToolbar extends Component {\r\n\r\n  static propTypes = {\r\n    handleAdd: PropTypes.func,             // обработчик добавления объекта\r\n    handleRemove: PropTypes.func,          // обработчик удаления строки\r\n    handleCustom: PropTypes.func,\r\n    classes: PropTypes.object.isRequired,\r\n  };\r\n\r\n  render() {\r\n\r\n    const {handleAdd, handleRemove, handleCustom, classes} = this.props;\r\n\r\n    return (\r\n\r\n      <Toolbar disableGutters className={classes.bar}>\r\n        <IconButton title=\"Добавить строку\" onClick={handleAdd}><AddIcon/></IconButton>\r\n        <IconButton title=\"Удалить строку\" onClick={handleRemove}><RemoveIcon/></IconButton>\r\n        <IconButton key=\"sep1\" disabled>|</IconButton>\r\n        <SelectOrder handleSelect={handleCustom}/>\r\n      </Toolbar>\r\n    );\r\n  }\r\n}\r\n\r\nconst StyledToolbar = withStyles(SettingsToolbar);\r\n\r\nexport default class RepParams extends Component {\r\n\r\n  static propTypes = {\r\n    handleAdd: PropTypes.func,             // обработчик добавления объекта\r\n    handleRemove: PropTypes.func,          // обработчик удаления строки\r\n    _obj: PropTypes.object.isRequired,\r\n  };\r\n\r\n  handleCustom = (row) => {\r\n    this.props._obj.fill_by_order(row)\r\n      .then(() => {\r\n        this.production.forceUpdate();\r\n      });\r\n  };\r\n\r\n  render() {\r\n\r\n    const {handleAdd, handleRemove, _obj} = this.props;\r\n\r\n    return (\r\n\r\n      <TabularSection\r\n        _obj={_obj}\r\n        _tabular=\"production\"\r\n        ref={(el) => this.production = el}\r\n        minHeight={308}\r\n        Toolbar={StyledToolbar}\r\n        handleAdd={handleAdd}\r\n        handleRemove={handleRemove}\r\n        handleCustom={this.handleCustom}\r\n      />\r\n    );\r\n  }\r\n\r\n}\r\n\r\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(\"path\", {\n  d: \"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z\"\n}), 'ChevronLeft');\n\nexports.default = _default;","/**\n * Каскадер печатных форм\n *\n * @module MenuPrint\n *\n * Created by Evgeniy Malyarov on 15.05.2019.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport IconButton from '@material-ui/core/IconButton';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport PrintIcon from '@material-ui/icons/Print';\nimport ChevronLeft from '@material-ui/icons/ChevronLeft';\n\nclass SubMenu extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      anchorEl: null\n    };\n\n    this.handleOpen = event => {\n      this.setState({\n        anchorEl: event.currentTarget\n      });\n    };\n\n    this.handleClose = () => {\n      this.setState({\n        anchorEl: null\n      });\n    };\n  }\n\n  render() {\n    const {\n      props: {\n        items,\n        Icon,\n        text,\n        handlePrint,\n        prefix,\n        variant\n      },\n      state: {\n        anchorEl\n      }\n    } = this;\n    return [variant === 'button' ? /*#__PURE__*/React.createElement(IconButton, {\n      key: \"btn_open\",\n      onClick: this.handleOpen\n    }, /*#__PURE__*/React.createElement(Icon, null)) : /*#__PURE__*/React.createElement(MenuItem, {\n      key: `${prefix}_open`,\n      onClick: this.handleOpen\n    }, Icon && /*#__PURE__*/React.createElement(ListItemIcon, null, /*#__PURE__*/React.createElement(Icon, null)), text), /*#__PURE__*/React.createElement(Menu, {\n      key: `${prefix}_menu`,\n      open: Boolean(anchorEl),\n      anchorEl: anchorEl,\n      anchorOrigin: {\n        vertical: 'top',\n        horizontal: 'left'\n      },\n      transformOrigin: {\n        vertical: 'top',\n        horizontal: 'right'\n      },\n      onClose: this.handleClose\n    }, anchorEl && items.map(v => /*#__PURE__*/React.createElement(MenuItem, {\n      key: v.ref,\n      onClick: () => {\n        handlePrint(v);\n        this.handleClose();\n      }\n    }, v.name)))];\n  }\n\n}\n\nclass MenuPrint extends SubMenu {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      anchorEl: null,\n      plates: []\n    };\n  }\n\n  componentDidMount() {\n    const {\n      _mgr\n    } = this.props.scheme.child_meta();\n    _mgr && _mgr.printing_plates().then(plates => {\n      const groups = new Map();\n\n      for (const key in plates) {\n        const plate = plates[key];\n        const group = plate.name.includes('/') ? plate.name.substr(0, plate.name.indexOf('/')).trim() : 'Общее';\n\n        if (!groups.get(group)) {\n          groups.set(group, []);\n        }\n\n        groups.get(group).push(plate);\n      }\n\n      plates = [];\n      groups.forEach((value, name) => plates.push({\n        name,\n        value\n      }));\n      this.setState({\n        plates\n      });\n    });\n  }\n\n  render() {\n    const {\n      props: {\n        handlePrint,\n        variant\n      },\n      state: {\n        anchorEl,\n        plates\n      }\n    } = this;\n\n    if (plates.length === 1) {\n      return /*#__PURE__*/React.createElement(SubMenu, {\n        items: plates[0].value,\n        Icon: PrintIcon,\n        text: \"Печать\",\n        handlePrint: handlePrint,\n        prefix: \"root\",\n        variant: variant\n      });\n    }\n\n    return [variant === 'button' ? /*#__PURE__*/React.createElement(IconButton, {\n      key: \"btn_open\",\n      onClick: this.handleOpen\n    }, /*#__PURE__*/React.createElement(PrintIcon, null)) : /*#__PURE__*/React.createElement(MenuItem, {\n      key: \"prn_open\",\n      onClick: this.handleOpen\n    }, /*#__PURE__*/React.createElement(ListItemIcon, null, /*#__PURE__*/React.createElement(PrintIcon, null)), \"Печать\"), /*#__PURE__*/React.createElement(Menu, {\n      key: \"prn_menu\",\n      open: Boolean(anchorEl),\n      anchorEl: anchorEl,\n      anchorOrigin: {\n        vertical: 'top',\n        horizontal: 'left'\n      },\n      transformOrigin: {\n        vertical: 'top',\n        horizontal: 'right'\n      },\n      onClose: this.handleClose\n    }, anchorEl && plates.map((plate, index) => /*#__PURE__*/React.createElement(SubMenu, {\n      key: `prn_${index}`,\n      items: plate.value,\n      Icon: ChevronLeft,\n      text: plate.name,\n      handlePrint: handlePrint,\n      prefix: `prn_${index}`\n    })))];\n  }\n\n}\n\nMenuPrint.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  scheme: PropTypes.object.isRequired,\n  // значение настроек компоновки\n  handlePrint: PropTypes.func.isRequired,\n  // обработчик открытия диалога печати\n  variant: PropTypes.string // использовать IconButton вместо MenuItem\n\n} : {};\nexport default MenuPrint;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(\"path\", {\n  d: \"M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6h-1.5z\"\n}), 'AttachFile');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(\"path\", {\n  d: \"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z\"\n}), 'Delete');\n\nexports.default = _default;","import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport IconWork from '@material-ui/icons/Work';\r\n//import Dialog from 'metadata-react/DnR/Dialog';\r\nimport Dialog from 'metadata-react/App/Dialog';\r\nimport DataList from 'metadata-react/DynList/DynList';\r\n\r\nclass SelectOrder extends Component {\r\n\r\n  constructor(props, context) {\r\n    super(props, context);\r\n    this.state = {open: false};\r\n  }\r\n\r\n  handleTouchTap = (event) => {\r\n    // This prevents ghost click.\r\n    event.preventDefault();\r\n\r\n    this.setState({open: true});\r\n  };\r\n\r\n  handleRequestClose = () => {\r\n    this.setState({open: false});\r\n  };\r\n\r\n  handleSelect = (row, _mgr) => {\r\n    this.handleRequestClose();\r\n    this.props.handleSelect(row, _mgr);\r\n  };\r\n\r\n  find_rows = (selector) => {\r\n    const {remote, props} = $p.adapters.pouch;\r\n    const {username, password} = remote.doc.__opts.auth;\r\n\r\n    selector.sort = [{date: 'desc'}];\r\n\r\n    const headers = new Headers();\r\n    headers.append('Authorization', 'Basic ' + btoa(unescape(encodeURIComponent(username + ':' + password))));\r\n    headers.append('suffix', props._suffix || '0');\r\n    const opts = {\r\n      method: 'post',\r\n      credentials: 'include',\r\n      headers,\r\n      body: JSON.stringify(selector)\r\n    };\r\n\r\n    return fetch('/r/_find', opts)\r\n      .then((res) => {\r\n        if(res.status <= 201) {\r\n          return res.json();\r\n        }\r\n        else {\r\n          return res.text()\r\n            .then((text) => {\r\n              throw new Error(`${res.statusText}: ${text}`);\r\n            });\r\n        }\r\n      })\r\n      .then((data) => {\r\n        data.docs.forEach((doc) => {\r\n          doc.ref = doc._id.split('|')[1];\r\n          delete doc._id;\r\n        });\r\n        return data;\r\n      });\r\n  };\r\n\r\n  render() {\r\n\r\n    const {handleSelect, props, state} = this;\r\n\r\n    return (\r\n      <div>\r\n        <IconButton title=\"Добавить из заказа\" onClick={this.handleTouchTap}>\r\n          <IconWork/>\r\n        </IconButton>\r\n        {state.open && <Dialog\r\n          open\r\n          noSpace\r\n          large\r\n          //initFullScreen\r\n          title=\"Добавить из заказа\"\r\n          onClose={this.handleRequestClose}\r\n        >\r\n          <DataList\r\n            height={480}\r\n            _mgr={$p.doc.calc_order}\r\n            _acl={props._acl}\r\n            handlers={{handleSelect}}\r\n            //find_rows={this.find_rows}\r\n            selectionMode\r\n            denyAddDel\r\n            //show_variants\r\n            show_search\r\n          />\r\n        </Dialog>}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nSelectOrder.propTypes = {\r\n  handleSelect: PropTypes.func.isRequired,\r\n  _acl: PropTypes.object\r\n};\r\nexport default SelectOrder;\r\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(\"path\", {\n  d: \"M20 6h-4V4c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-6 0h-4V4h4v2z\"\n}), 'Work');\n\nexports.default = _default;"],"sourceRoot":""}