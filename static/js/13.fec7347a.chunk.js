(this["webpackJsonpwindowbuilder-new"]=this["webpackJsonpwindowbuilder-new"]||[]).push([[13],{692:function(e,t,a){"use strict";a.r(t);var n=a(6),r=a(9),s=a(26),l=a(8),o=a(7),i=a(0),c=a.n(i),h=a(1),d=a.n(h),u=a(560),m=a(222),p=a(464),b=a(53),g=a(170),_=a(169),f=a(168),w=a(219),S=a(227),E=a.n(S),v=a(562),j=a.n(v),C=a(581),x=a.n(C),O=a(234),y=a.n(O),R=a(634),k=a.n(R),D=a(642),T=a(578),P=a(584),H=a(93),N=function(e){Object(l.a)(a,e);var t=Object(o.a)(a);function a(e,r){var l;return Object(n.a)(this,a),(l=t.call(this,e,r)).handleChange=function(){l.props.handleSchemeChange(l.props.scheme)},l.state={anchorEl:void 0,menuOpen:!1},D.a.call(Object(s.a)(l)),l}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=this.state,a=this.handleChange,n=e.handleSave,r=(e.handleClose,e.handlePrint),s=(e._obj,e._tabular,e.classes),l=e.scheme,o=e.settings_open,i=e.ToolbarExt;return c.a.createElement(p.a,{disableGutters:!0,className:s.toolbar},c.a.createElement(_.a,{size:"small",onClick:n,disabled:o},c.a.createElement("i",{className:"fa fa-play fa-fw"})," \u0421\u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u0442\u044c"),!l.standard_period.empty()&&c.a.createElement(g.a,{disabled:!0},"|"),!l.standard_period.empty()&&c.a.createElement(P.a,{_obj:l,_fld:"date",_meta:{synonym:"\u041f\u0435\u0440\u0438\u043e\u0434"},classes:s,handleChange:a}),i&&c.a.createElement(i,null),c.a.createElement(b.a,{color:"inherit",className:s.flex}," "),c.a.createElement(T.a,{handleSettingsOpen:e.handleSettingsOpen,handleSettingsClose:e.handleSettingsClose,handleSchemeChange:e.handleSchemeChange,settings_open:o,classes:s,scheme:l,show_variants:!0}),c.a.createElement(g.a,{onClick:this.handleMenuOpen,title:"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e"},c.a.createElement(E.a,null)),c.a.createElement(f.a,{anchorEl:t.anchorEl,open:t.menuOpen,onClose:this.handleMenuClose},c.a.createElement(w.a,{disabled:!0,onClick:r},c.a.createElement(j.a,null)," \xa0\u041f\u0435\u0447\u0430\u0442\u044c"),c.a.createElement(w.a,{onClick:this.handleExportCSV},c.a.createElement(x.a,null)," \xa0\u041a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c CSV"),c.a.createElement(w.a,{onClick:this.handleExportJSON},c.a.createElement(y.a,null)," \xa0\u041a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c JSON"),c.a.createElement(w.a,{onClick:this.handleExportXLS},c.a.createElement(k.a,null)," \xa0\u042d\u043a\u0441\u043f\u043e\u0440\u0442 \u0432 XLS")))}}]),a}(i.Component);N.propTypes={};var G=Object(H.a)(N),J=a(42),I=a(643),A=a(569),B=a.n(A),L=function(e){Object(l.a)(a,e);var t=Object(o.a)(a);function a(e,r){var l;Object(n.a)(this,a),(l=t.call(this,e,r)).getRows=function(e){return l.state.rows[e]},l.onRowExpandToggle=function(e){var t=Object.assign({},l.state.expanded);t[e.columnGroupName]=Object.assign({},t[e.columnGroupName]),t[e.columnGroupName][e.row]={isExpanded:e.shouldExpand},l.setState({expanded:t})},l.onCellExpand=function(e){var t=l.state.rows.slice(0),a=e.rowData.row,n=t.indexOf(e.rowData),r=e.expandArgs.children,s=Object.assign({},l.state.expanded);s&&!s[a]?(s[a]=!0,l.updateSubRowDetails(r,e.rowData.treeDepth),t.splice.apply(t,[n+1,0].concat(Object(I.a)(r)))):s[a]&&(s[a]=!1,t.splice(n+1,r.length)),l.setState({expanded:s,rows:t})},l.getSubRowDetails=function(e){var t=l.props._columns[0].key,a=!!l.state.expanded[e.row]&&l.state.expanded[e.row];return{group:e.children&&e.children.length>0,expanded:a,children:e.children,field:t,treeDepth:e.treeDepth||0,siblingIndex:e.siblingIndex,numberSiblings:e.numberSiblings}},l.RowRenderer=function(e){var t,a=e.renderBaseRow,n=Object(J.a)(e,["renderBaseRow"]);return l.props.scheme.conditional_appearance.find_rows({use:!0},(function(e){if(e.check(n.row)){try{t=c.a.createElement("div",{style:JSON.parse(e.css)},a(n))}catch(r){}return!1}})),t||a(n)},l.updateSubRowDetails=function(e,t){var a=t||0;e.forEach((function(t,n){t.treeDepth=a+1,t.siblingIndex=n,t.numberSiblings=e.length,t.children&&l.updateSubRowDetails(t.children,t.treeDepth)}))};var o=e._obj,i=e._tabular,h=e._meta;Object(s.a)(l);return l.state={_meta:h||o._metadata(i),rows:[],expanded:{}},l}return Object(r.a)(a,[{key:"shouldComponentUpdate",value:function(e){if(e.scheme!==this.props.scheme){var t=this.props,a=t._obj[t._tabular];a&&a.count()&&(a._rows&&(a._rows.length=a._rows._count=0),a.clear()),this.state.rows.length=0,this.state.expanded={}}return!0}},{key:"expandRoot",value:function(){var e=this.props,t=e._obj,a=e._tabular,n=e.scheme.dims(),r=t[a]._rows||[];if(r.length&&n.length){var s=r.slice(0),l=r[0].children;s.splice.apply(s,[1,0].concat(Object(I.a)(l))),this.updateSubRowDetails(l,1),this.setState({expanded:{0:!0},rows:s})}else this.setState({expanded:{},rows:r})}},{key:"expandAll",value:function(){var e=this,t=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],this.props.scheme.dims()),a=this.state,n=a.expanded,r=a.rows;if(r.length&&t.length){var s=r.slice(0);r.slice(0).forEach((function(t,a){if(!t._level&&t.children&&!n[t.row]){var r=t.children;s.splice.apply(s,[s.indexOf(t)+1,0].concat(Object(I.a)(r))),e.updateSubRowDetails(r,1),n[t.row]=!0}})),this.setState({expanded:n,rows:s})}}},{key:"render",value:function(){var e=this.props,t=this.state,a=this.RowRenderer,n=e._columns,r=e.minHeight,s=e.hideHeader;return c.a.createElement(B.a,{columns:n,enableCellSelect:!0,rowGetter:this.getRows,rowsCount:t.rows.length,getSubRowDetails:this.getSubRowDetails,onCellExpand:this.onCellExpand,minHeight:r||220,rowHeight:33,headerRowHeight:s?1:33,rowRenderer:a})}}]),a}(i.Component);L.propTypes={};var M=a(568),U=a(231),V=a(25),X=function(e){Object(l.a)(a,e);var t=Object(o.a)(a);function a(e,r){var l;Object(n.a)(this,a),(l=t.call(this,e,r)).handleSave=function(){var e=l.state,t=e._obj,a=e.scheme;return a&&!a.empty()?(t.scheme!==a&&(t.scheme=a),t.calculate().then((function(){return l._result.expandRoot()}))):Promise.reject(new Error("\u041f\u0443\u0441\u0442\u0430\u044f \u0441\u0445\u0435\u043c\u0430 \u043a\u043e\u043c\u043f\u043e\u043d\u043e\u0432\u043a\u0438"))},l.handlePrint=function(){},l.handleClose=function(){},l.handleSettingsOpen=function(){l.setState({settings_open:!0})},l.handleSettingsClose=function(){l.setState({settings_open:!1})},l.handleSchemeChange=function(e){var t=Object(s.a)(l),a=t.props,n=t.state,r=n._obj,o=n._meta,i=a.handleSchemeChange,c=a.handleColumns,h=a.read_only,d=e.rx_columns({mode:"ts",fields:o.fields,_obj:r,read_only:h});c&&c(d),i&&i(Object(s.a)(l),e),l.setState({scheme:e,_columns:d},(function(){return l.shouldComponentUpdate(a)}))};var o=e._mgr,i=e._meta,c=e._obj,h=e._tabular||o._tabular||"data";return l.state={_obj:c||o.create(),_meta:i||o.metadata(h),_tabular:h,settings_open:!1},(e.scheme?Promise.resolve(e.scheme):$p.cat.scheme_settings.get_scheme(o.class_name+".".concat(h))).then(l.handleSchemeChange).then((function(){e.autoexec&&Promise.resolve().then((function(){return l.handleSave()}))})),e.registerRep&&e.registerRep(Object(s.a)(l)),l}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=this.state,n=a._obj,r=a._columns,s=a._tabular,l=a.scheme,o=a.settings_open,i=n._manager.RepParams;if(!l)return c.a.createElement(m.a,{text:"\u0427\u0442\u0435\u043d\u0438\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a \u043a\u043e\u043c\u043f\u043e\u043d\u043e\u0432\u043a\u0438..."});if(!n)return c.a.createElement(m.a,{text:"\u0427\u0442\u0435\u043d\u0438\u0435 \u043e\u0431\u044a\u0435\u043a\u0442\u0430 \u0434\u0430\u043d\u043d\u044b\u0445..."});if(!r||!r.length)return c.a.createElement(m.a,{text:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a \u043a\u043e\u043c\u043f\u043e\u043d\u043e\u0432\u043a\u0438..."});var h=t.height||t.minHeight||500,d=!o||h>572;return[!t.ignoreTitle&&c.a.createElement(U.a,{key:"helmet",title:t.title},c.a.createElement("meta",{name:"description",content:"\u041e\u0442\u0447\u0435\u0442"}),c.a.createElement("meta",{property:"og:title",content:t.title}),c.a.createElement("meta",{property:"og:description",content:"\u041e\u0442\u0447\u0435\u0442"})),!t.hideToolbar&&c.a.createElement(G,{key:"toolbar",_obj:n,_tabular:s,_columns:r,scheme:l,settings_open:o,ToolbarExt:t.ToolbarExt,handleSettingsOpen:this.handleSettingsOpen,handleSettingsClose:this.handleSettingsClose,handleSchemeChange:this.handleSchemeChange,handleSave:this.handleSave,handlePrint:this.handlePrint,handleClose:this.handleClose}),o&&c.a.createElement(M.a,{key:"tabs",height:d?272:h-104,width:t.width,scheme:l,tabParams:i&&c.a.createElement(i,{_obj:n,scheme:l}),handleSchemeChange:this.handleSchemeChange}),d&&c.a.createElement(L,{key:"tabular",ref:function(t){return e._result=t},_obj:n,_tabular:s,_columns:r,scheme:l,minHeight:h-52-(o?320:0),hideHeader:t.hideHeader})]}},{key:"ltitle",get:function(){var e=this.props._mgr,t=this.state.scheme;return e.metadata().synonym+(t&&t.name?" (".concat(t.name,")"):"")}}]),a}(u.a);X.propTypes={_mgr:d.a.object.isRequired,_obj:d.a.object,_meta:d.a.object,_tabular:d.a.string,_acl:d.a.string,read_only:d.a.bool,autoexec:d.a.bool,ignoreTitle:d.a.bool,handlePrint:d.a.func,handleSchemeChange:d.a.func,handleColumns:d.a.func,registerRep:d.a.func,ToolbarExt:d.a.func};var q=Object(V.withIface)(X);t.default=q}}]);
//# sourceMappingURL=13.fec7347a.chunk.js.map