{"version":3,"sources":["../node_modules/metadata-react/DynList/MenuPrint.js","../node_modules/@material-ui/icons/ChevronLeft.js","../node_modules/@material-ui/icons/AttachFile.js","../node_modules/metadata-react/DynList/DataListToolbar.js","../node_modules/@material-ui/icons/List.js","../node_modules/@material-ui/icons/AccountTree.js","../node_modules/metadata-react/DataTree/styles.js","../node_modules/metadata-react/DataTree/DataTree.js","../node_modules/metadata-react/DataTree/index.js"],"names":["SubMenu","args","state","anchorEl","handleOpen","event","setState","currentTarget","handleClose","this","props","items","Icon","text","handlePrint","prefix","variant","React","createElement","IconButton","key","onClick","MenuItem","ListItemIcon","Menu","open","Boolean","anchorOrigin","vertical","horizontal","transformOrigin","onClose","map","v","ref","name","Component","MenuPrint","plates","_mgr","scheme","child_meta","printing_plates","then","groups","Map","plate","group","includes","substr","indexOf","trim","get","set","push","forEach","value","length","PrintIcon","index","ChevronLeft","propTypes","_interopRequireDefault","require","Object","defineProperty","exports","default","_react","_default","d","DataListToolbar","undefined","handleClick","handleRequestClose","handleSettingsToggle","settings_open","handleSettingsClose","handleSettingsOpen","classes","width","btns","end_btns","menu_items","toolbar2row","flat","show_flat","setting_in_menu","widthUpSm","isWidthUp","Toolbar","disableGutters","className","toolbar","selectionMode","Button","title","size","spaceLeft","handleSelect","denyAddDel","handleAdd","AddIcon","handleEdit","EditIcon","denyDel","handleRemove","RemoveIcon","flatChange","ListIcon","TreeIcon","standard_period","empty","disabled","DateRange","_obj","_fld","_meta","synonym","handleChange","handleFilterChange","flex","SchemeSettingsButtons","handleSchemeChange","show_search","show_variants","hide_btn","MoreVertIcon","SettingsIcon","handleAttachments","AttachIcon","SearchBox","defaultProps","compose","withStyles","withWidth","theme","hoveredItem","backgroundColor","selectedItem","DataTree","context","selectedRow","handlers","row","_list","handleInfoText","set_default","set_standard_period","columns","_mounted","$p","CatScheme_settings","newState","_loadMoreRows","assign","info_text","_getColumnWidth","isNaN","parseInt","COLUMN_DEFAULT_WIDTH","_noContentRendered","no_rows","LoadingMessage","_owner","find_rows","network_error","test","cachable","selector","get_search_selector","search","_search","top","skip","rows","Promise","resolve","rowCount","handleManagerChange","_ref","class_name","metadata","cat","scheme_settings","get_scheme","sizes","confirm_text","RepParams","registerFilterChange","others","height","show_grid","toolbar_props","Confirm","handleOk","_handleRemove","handleCancel","AutoSizer","disableHeight","SchemeSettingsTabs","tabParams","rowData","columnIndex","id","type","control_by_type","value_mgr","presentation","utils","moment","format","_masks","date","toString","dnr","frameRect","w2","reduce","sum","val","list_presentation","MDNRComponent","PropTypes","object","isRequired","_acl","string","bool","read_only","modal","withIface","DataList"],"mappings":"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","file":"static/js/7.d629eee0.chunk.js","sourcesContent":["/**\n * Каскадер печатных форм\n *\n * @module MenuPrint\n *\n * Created by Evgeniy Malyarov on 15.05.2019.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport IconButton from '@material-ui/core/IconButton';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport PrintIcon from '@material-ui/icons/Print';\nimport ChevronLeft from '@material-ui/icons/ChevronLeft';\n\nclass SubMenu extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      anchorEl: null\n    };\n\n    this.handleOpen = event => {\n      this.setState({\n        anchorEl: event.currentTarget\n      });\n    };\n\n    this.handleClose = () => {\n      this.setState({\n        anchorEl: null\n      });\n    };\n  }\n\n  render() {\n    const {\n      props: {\n        items,\n        Icon,\n        text,\n        handlePrint,\n        prefix,\n        variant\n      },\n      state: {\n        anchorEl\n      }\n    } = this;\n    return [variant === 'button' ? /*#__PURE__*/React.createElement(IconButton, {\n      key: \"btn_open\",\n      onClick: this.handleOpen\n    }, /*#__PURE__*/React.createElement(Icon, null)) : /*#__PURE__*/React.createElement(MenuItem, {\n      key: `${prefix}_open`,\n      onClick: this.handleOpen\n    }, Icon && /*#__PURE__*/React.createElement(ListItemIcon, null, /*#__PURE__*/React.createElement(Icon, null)), text), /*#__PURE__*/React.createElement(Menu, {\n      key: `${prefix}_menu`,\n      open: Boolean(anchorEl),\n      anchorEl: anchorEl,\n      anchorOrigin: {\n        vertical: 'top',\n        horizontal: 'left'\n      },\n      transformOrigin: {\n        vertical: 'top',\n        horizontal: 'right'\n      },\n      onClose: this.handleClose\n    }, anchorEl && items.map(v => /*#__PURE__*/React.createElement(MenuItem, {\n      key: v.ref,\n      onClick: () => {\n        handlePrint(v);\n        this.handleClose();\n      }\n    }, v.name)))];\n  }\n\n}\n\nclass MenuPrint extends SubMenu {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      anchorEl: null,\n      plates: []\n    };\n  }\n\n  componentDidMount() {\n    const {\n      _mgr\n    } = this.props.scheme.child_meta();\n    _mgr && _mgr.printing_plates().then(plates => {\n      const groups = new Map();\n\n      for (const key in plates) {\n        const plate = plates[key];\n        const group = plate.name.includes('/') ? plate.name.substr(0, plate.name.indexOf('/')).trim() : 'Общее';\n\n        if (!groups.get(group)) {\n          groups.set(group, []);\n        }\n\n        groups.get(group).push(plate);\n      }\n\n      plates = [];\n      groups.forEach((value, name) => plates.push({\n        name,\n        value\n      }));\n      this.setState({\n        plates\n      });\n    });\n  }\n\n  render() {\n    const {\n      props: {\n        handlePrint,\n        variant\n      },\n      state: {\n        anchorEl,\n        plates\n      }\n    } = this;\n\n    if (plates.length === 1) {\n      return /*#__PURE__*/React.createElement(SubMenu, {\n        items: plates[0].value,\n        Icon: PrintIcon,\n        text: \"Печать\",\n        handlePrint: handlePrint,\n        prefix: \"root\",\n        variant: variant\n      });\n    }\n\n    return [variant === 'button' ? /*#__PURE__*/React.createElement(IconButton, {\n      key: \"btn_open\",\n      onClick: this.handleOpen\n    }, /*#__PURE__*/React.createElement(PrintIcon, null)) : /*#__PURE__*/React.createElement(MenuItem, {\n      key: \"prn_open\",\n      onClick: this.handleOpen\n    }, /*#__PURE__*/React.createElement(ListItemIcon, null, /*#__PURE__*/React.createElement(PrintIcon, null)), \"Печать\"), /*#__PURE__*/React.createElement(Menu, {\n      key: \"prn_menu\",\n      open: Boolean(anchorEl),\n      anchorEl: anchorEl,\n      anchorOrigin: {\n        vertical: 'top',\n        horizontal: 'left'\n      },\n      transformOrigin: {\n        vertical: 'top',\n        horizontal: 'right'\n      },\n      onClose: this.handleClose\n    }, anchorEl && plates.map((plate, index) => /*#__PURE__*/React.createElement(SubMenu, {\n      key: `prn_${index}`,\n      items: plate.value,\n      Icon: ChevronLeft,\n      text: plate.name,\n      handlePrint: handlePrint,\n      prefix: `prn_${index}`\n    })))];\n  }\n\n}\n\nMenuPrint.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  scheme: PropTypes.object.isRequired,\n  // значение настроек компоновки\n  handlePrint: PropTypes.func.isRequired,\n  // обработчик открытия диалога печати\n  variant: PropTypes.string // использовать IconButton вместо MenuItem\n\n} : {};\nexport default MenuPrint;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(\"path\", {\n  d: \"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z\"\n}), 'ChevronLeft');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(\"path\", {\n  d: \"M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6h-1.5z\"\n}), 'AttachFile');\n\nexports.default = _default;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport Button from '@material-ui/core/Button';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport AddIcon from '@material-ui/icons/AddCircleOutline';\nimport RemoveIcon from '@material-ui/icons/DeleteOutline';\nimport EditIcon from '@material-ui/icons/Edit';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport AttachIcon from '@material-ui/icons/AttachFile';\nimport SelectIcon from '@material-ui/icons/PlaylistAddCheck';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport TreeIcon from '@material-ui/icons/AccountTree';\nimport ListIcon from '@material-ui/icons/List';\nimport SchemeSettingsButtons from '../SchemeSettings/SchemeSettingsButtons';\nimport SearchBox from '../SchemeSettings/SearchBox';\nimport DateRange from '../SchemeSettings/DateRange';\nimport { compose } from 'redux';\nimport classnames from 'classnames';\nimport withStyles from '../Header/toolbar';\nimport withWidth, { isWidthUp } from '@material-ui/core/withWidth';\nimport MenuPrint from './MenuPrint';\n\nclass DataListToolbar extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      anchorEl: undefined,\n      open: false\n    };\n\n    this.handleClick = event => {\n      this.setState({\n        open: true,\n        anchorEl: event.currentTarget\n      });\n    };\n\n    this.handleRequestClose = () => {\n      this.setState({\n        open: false\n      });\n    };\n\n    this.handleSettingsToggle = () => {\n      const {\n        props\n      } = this;\n\n      if (props.settings_open) {\n        props.handleSettingsClose();\n      } else {\n        props.handleSettingsOpen();\n      }\n\n      this.handleRequestClose();\n    };\n  }\n\n  render() {\n    const {\n      props,\n      state\n    } = this;\n    const {\n      classes,\n      scheme,\n      width,\n      btns,\n      end_btns,\n      menu_items,\n      toolbar2row,\n      flat,\n      show_flat,\n      setting_in_menu\n    } = props;\n    const widthUpSm = isWidthUp('sm', width);\n    return [/*#__PURE__*/React.createElement(Toolbar, {\n      key: \"toolbar1\",\n      disableGutters: true,\n      className: classes.toolbar\n    }, props.selectionMode && /*#__PURE__*/React.createElement(Button, {\n      key: \"select\",\n      title: \"Выбрать из списка\",\n      size: \"small\",\n      variant: \"outlined\",\n      className: classes.spaceLeft,\n      onClick: props.handleSelect\n    }, \"Выбрать\"), !props.denyAddDel && /*#__PURE__*/React.createElement(IconButton, {\n      key: \"create\",\n      title: \"Создать объект\",\n      onClick: props.handleAdd\n    }, /*#__PURE__*/React.createElement(AddIcon, null)), /*#__PURE__*/React.createElement(IconButton, {\n      key: \"edit\",\n      title: \"Открыть форму объекта\",\n      onClick: props.handleEdit\n    }, /*#__PURE__*/React.createElement(EditIcon, null)), !props.denyAddDel && !props.denyDel && /*#__PURE__*/React.createElement(IconButton, {\n      key: \"del\",\n      title: \"Пометить на удаление\",\n      onClick: props.handleRemove\n    }, /*#__PURE__*/React.createElement(RemoveIcon, null)), show_flat && /*#__PURE__*/React.createElement(IconButton, {\n      key: \"flat\",\n      title: flat ? 'Включить иерархию' : 'Включить плоский список',\n      onClick: props.flatChange\n    }, flat ? /*#__PURE__*/React.createElement(ListIcon, null) : /*#__PURE__*/React.createElement(TreeIcon, null)), !scheme.standard_period.empty() && widthUpSm && /*#__PURE__*/React.createElement(IconButton, {\n      disabled: true\n    }, \"|\"), !scheme.standard_period.empty() && widthUpSm && /*#__PURE__*/React.createElement(DateRange, {\n      _obj: scheme,\n      _fld: 'date',\n      _meta: {\n        synonym: 'Период'\n      },\n      classes: classes,\n      handleChange: props.handleFilterChange\n    }), (!toolbar2row || widthUpSm) && btns\n    /* дополнительные кнопки */\n    , /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.flex\n    }), /*#__PURE__*/React.createElement(SchemeSettingsButtons, {\n      handleSettingsOpen: props.handleSettingsOpen,\n      handleSettingsClose: props.handleSettingsClose,\n      handleSchemeChange: props.handleSchemeChange,\n      handleFilterChange: props.handleFilterChange,\n      settings_open: props.settings_open,\n      classes: classes,\n      scheme: scheme,\n      show_search: props.show_search && (!toolbar2row || widthUpSm),\n      show_variants: props.show_variants,\n      hide_btn: !widthUpSm || setting_in_menu\n    }), (!toolbar2row || widthUpSm) && end_btns\n    /* дополнительные кнопки */\n    , /*#__PURE__*/React.createElement(IconButton, {\n      onClick: this.handleClick,\n      title: \"Дополнительно\"\n    }, /*#__PURE__*/React.createElement(MoreVertIcon, null)), /*#__PURE__*/React.createElement(Menu, {\n      anchorEl: state.anchorEl,\n      open: state.open,\n      onClose: this.handleRequestClose\n    }, (!widthUpSm || setting_in_menu) && /*#__PURE__*/React.createElement(MenuItem, {\n      onClick: this.handleSettingsToggle\n    }, /*#__PURE__*/React.createElement(ListItemIcon, null, /*#__PURE__*/React.createElement(SettingsIcon, null)), \"Настройки\"), props.handlePrint && /*#__PURE__*/React.createElement(MenuPrint, {\n      scheme: scheme,\n      handlePrint: props.handlePrint\n    }), props.handleAttachments && /*#__PURE__*/React.createElement(MenuItem, {\n      onClick: props.handleAttachments\n    }, /*#__PURE__*/React.createElement(ListItemIcon, null, /*#__PURE__*/React.createElement(AttachIcon, null)), \"Вложения\"), menu_items\n    /* дополнительные пункты меню */\n    )), toolbar2row && !widthUpSm && /*#__PURE__*/React.createElement(Toolbar, {\n      key: \"toolbar2\",\n      disableGutters: true,\n      className: classes.toolbar\n    }, btns\n    /* дополнительные кнопки */\n    , /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.flex\n    }), end_btns\n    /* дополнительные кнопки */\n    , /*#__PURE__*/React.createElement(SearchBox, {\n      scheme: scheme,\n      handleFilterChange: props.handleFilterChange,\n      isWidthUp: widthUpSm\n    }))];\n  }\n\n}\n\nDataListToolbar.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  selectionMode: PropTypes.bool,\n  // режим выбора из списка. Если истина - дополнительно рисум кнопку выбора\n  denyAddDel: PropTypes.bool,\n  // Запрет добавления и удаления строк (скрывает кнопки в панели, отключает обработчики)\n  handleSchemeChange: PropTypes.func.isRequired,\n  // обработчик при изменении настроек компоновки\n  scheme: PropTypes.object.isRequired,\n  // значение настроек компоновки\n  handleAdd: PropTypes.func,\n  // обработчик добавления объекта\n  handleEdit: PropTypes.func,\n  // обработчик открфтия формы редактора\n  handleRemove: PropTypes.func,\n  // обработчик удаления строки\n  handlePrint: PropTypes.func,\n  // обработчик открытия диалога печати\n  handleAttachments: PropTypes.func // обработчик открытия диалога присоединенных файлов\n\n} : {};\nDataListToolbar.defaultProps = {\n  show_search: true\n};\nexport default compose(withStyles, withWidth())(DataListToolbar);","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(\"path\", {\n  d: \"M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z\"\n}), 'List');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(\"path\", {\n  d: \"M22 11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3z\"\n}), 'AccountTree');\n\nexports.default = _default;","import { withStyles } from '@material-ui/styles';\nexport default withStyles(theme => ({\n  hoveredItem: {\n    backgroundColor: '#f5f2f2'\n  },\n  selectedItem: {\n    backgroundColor: '#fffbdc'\n  }\n}));","import React from 'react';\nimport PropTypes from 'prop-types';\nimport MDNRComponent from '../common/MDNRComponent';\nimport AutoSizer from 'react-virtualized/dist/es/AutoSizer';\nimport cn from 'classnames';\nimport LoadingMessage from '../DumbLoader/LoadingMessage';\nimport DataListToolbar from '../DynList/DataListToolbar';\nimport SchemeSettingsTabs from '../SchemeSettings/SchemeSettingsTabs';\nimport Confirm from '../App/Confirm';\nimport withStyles from './styles';\nimport { withIface } from 'metadata-redux';\nimport control_by_type from 'metadata-abstract-ui/ui';\nimport Typography from '@material-ui/core/Typography';\n\nclass DataTree extends MDNRComponent {\n  constructor(props, context) {\n    super(props, context);\n\n    this.handleSelect = () => {\n      const {\n        state: {\n          selectedRow\n        },\n        props: {\n          handlers,\n          _mgr\n        }\n      } = this;\n\n      if (!selectedRow) {\n        this.handleInfoText('Не выбрана строка');\n      } else {\n        const row = this._list[selectedRow];\n        row && handlers.handleSelect && handlers.handleSelect(row, _mgr);\n      }\n    };\n\n    this.handleAdd = event => {\n      const {\n        handlers,\n        _mgr\n      } = this.props;\n      handlers.handleAdd && handlers.handleAdd(_mgr, event);\n    };\n\n    this.handleSchemeChange = scheme => {\n      scheme.set_default();\n      scheme.set_standard_period(true); // пересчитываем и перерисовываем динсписок\n\n      this.handleFilterChange(scheme, scheme.columns());\n    };\n\n    this.handleFilterChange = (scheme, columns) => {\n      const {\n        state,\n        props,\n        _list,\n        _mounted\n      } = this;\n\n      if (!(scheme instanceof $p.CatScheme_settings)) {\n        scheme = state.scheme;\n      }\n\n      if (!columns) {\n        columns = state.columns;\n      }\n\n      const newState = {\n        scheme,\n        columns\n      };\n\n      if (_mounted) {\n        this.setState(newState, () => {\n          this._loadMoreRows();\n        });\n      } else {\n        Object.assign(state, newState);\n\n        this._loadMoreRows();\n      }\n    };\n\n    this.handlePrint = () => {\n      const row = this._list[this.state.selectedRow];\n      const {\n        handlers,\n        _mgr\n      } = this.props;\n      row && handlers.handlePrint && handlers.handlePrint(row, _mgr);\n    };\n\n    this.handleAttachments = () => {\n      const row = this._list[this.state.selectedRow];\n      const {\n        handlers,\n        _mgr\n      } = this.props;\n      row && handlers.handleAttachments && handlers.handleAttachments(row, _mgr);\n    };\n\n    this.handleSettingsOpen = () => {\n      this.setState({\n        settings_open: true\n      });\n    };\n\n    this.handleSettingsClose = () => {\n      this.setState({\n        settings_open: false\n      });\n    };\n\n    this.handleInfoText = info_text => {\n      if (typeof info_text !== 'string') {\n        info_text = '';\n      }\n\n      this.setState({\n        info_text\n      });\n    };\n\n    this._getColumnWidth = ({\n      index\n    }) => {\n      // todo: Take remaining space if width of column equal '*'\n      const {\n        columns\n      } = this.state;\n\n      if (isNaN(parseInt(columns[index].width, 10))) {\n        return DataTree.COLUMN_DEFAULT_WIDTH;\n      } else {\n        return parseInt(columns[index].width, 10);\n      }\n    };\n\n    this._noContentRendered = () => {\n      const {\n        no_rows\n      } = this.state;\n      return /*#__PURE__*/React.createElement(LoadingMessage, {\n        text: no_rows ? 'Записей не найдено...' : ''\n      });\n    };\n\n    this._loadMoreRows = () => {\n      const {\n        props: {\n          _mgr,\n          _owner,\n          find_rows\n        },\n        state: {\n          scheme,\n          columns,\n          ref\n        },\n        _list\n      } = this;\n      const newState = {\n        no_rows: false,\n        network_error: null\n      };\n      this.setState(newState); // в зависимости от типа кеширования...\n\n      if (/ram$/.test(_mgr.cachable)) {\n        // фильтруем в озу\n        const selector = _mgr.get_search_selector({\n          _obj: _owner ? _owner._obj || _owner.props && _owner.props._obj : null,\n          _meta: _owner ? _owner._meta : {},\n          search: scheme._search,\n          top: 1000,\n          skip: 0\n        });\n\n        const rows = _mgr.find_rows(selector);\n\n        return Promise.resolve(rows);\n      } else {\n        this.setState({\n          network_error: 'err'\n        });\n      }\n    };\n\n    this.state = {\n      selectedRow: 0,\n      rowCount: 0,\n      settings_open: false,\n      no_rows: false,\n      ref: ''\n    };\n    /** Set of tree rows. */\n\n    this._list = [];\n    this.handleManagerChange(props);\n  } // при изменении менеджера данных\n\n\n  handleManagerChange({\n    _mgr,\n    _meta,\n    _ref\n  }) {\n    const {\n      class_name\n    } = _mgr;\n    this._meta = _meta || _mgr.metadata();\n    const newState = {\n      ref: _ref || ''\n    };\n\n    if (this._mounted) {\n      this.setState(newState);\n    } else {\n      Object.assign(this.state, newState);\n    }\n\n    $p.cat.scheme_settings.get_scheme(class_name).then(this.handleSchemeChange);\n  } // обработчик выбора значения в списке\n\n\n  get sizes() {\n    let {\n      context: {\n        dnr\n      },\n      props: {\n        width,\n        height\n      },\n      state: {\n        columns\n      }\n    } = this;\n\n    if (!height) {\n      height = dnr && parseInt(dnr.frameRect.height) - 26;\n    }\n\n    if (!height || height < 320) {\n      height = 320;\n    }\n\n    if (!width) {\n      width = dnr && parseInt(dnr.frameRect.width);\n    }\n\n    if (!width || width < 480) {\n      width = 480;\n    } // горизонтальная прокрутка\n\n\n    const w2 = columns && columns.reduce((sum, val, index) => {\n      return sum + this._getColumnWidth({\n        index\n      });\n    }, 0);\n\n    if (w2 > width) {\n      width = w2;\n    }\n\n    return {\n      width,\n      height\n    };\n  }\n\n  get ltitle() {\n    const {\n      _mgr\n    } = this.props;\n    return `${_mgr.metadata().list_presentation || _mgr.metadata().synonym} (дерево)`;\n  }\n\n  render() {\n    const {\n      state,\n      props,\n      context,\n      _meta,\n      sizes,\n      _list\n    } = this;\n    const {\n      columns,\n      scheme,\n      confirm_text,\n      info_text,\n      settings_open,\n      rowCount\n    } = state;\n    const {\n      _mgr: {\n        RepParams\n      },\n      classes,\n      title,\n      registerFilterChange,\n      width,\n      height,\n      ...others\n    } = props;\n\n    if (!scheme) {\n      return /*#__PURE__*/React.createElement(LoadingMessage, {\n        text: \"Чтение настроек компоновки...\"\n      });\n    } else if (!columns || !columns.length) {\n      return /*#__PURE__*/React.createElement(LoadingMessage, {\n        text: \"Ошибка настроек компоновки...\"\n      });\n    }\n\n    registerFilterChange && registerFilterChange(this.handleFilterChange);\n    const show_grid = !settings_open || sizes.height > 572;\n    const toolbar_props = {\n      key: 'toolbar',\n      scheme,\n      ...others,\n      settings_open,\n      handleSelect: this.handleSelect,\n      handleAdd: this.handleAdd,\n      handlePrint: this.handlePrint,\n      handleAttachments: this.handleAttachments,\n      handleSettingsOpen: this.handleSettingsOpen,\n      handleSettingsClose: this.handleSettingsClose,\n      handleSchemeChange: this.handleSchemeChange,\n      handleFilterChange: this.handleFilterChange\n    };\n    return [// диалог предупреждений при удалении\n    confirm_text && /*#__PURE__*/React.createElement(Confirm, {\n      key: \"confirm\",\n      title: _meta.synonym,\n      text: confirm_text,\n      handleOk: this._handleRemove,\n      handleCancel: () => this.setState({\n        confirm_text: ''\n      }),\n      open: true\n    }), info_text && /*#__PURE__*/React.createElement(Confirm, {\n      key: \"confirm\",\n      title: _meta.synonym,\n      text: info_text,\n      handleOk: this.handleInfoText,\n      handleCancel: this.handleInfoText,\n      open: true\n    }),\n    /*#__PURE__*/\n    // панель инструментов табчасти\n    React.createElement(DataListToolbar, toolbar_props), // панель настроек компоновки\n    settings_open && /*#__PURE__*/React.createElement(AutoSizer, {\n      key: \"tabs\",\n      disableHeight: true\n    }, ({\n      width\n    }) => /*#__PURE__*/React.createElement(SchemeSettingsTabs, {\n      height: show_grid ? 272 : (sizes.height || 500) - 104,\n      width: width,\n      scheme: scheme,\n      tabParams: RepParams && /*#__PURE__*/React.createElement(RepParams, {\n        scheme: scheme\n      }),\n      handleSchemeChange: this.handleSchemeChange\n    })), // собственно, дерево\n    show_grid && /*#__PURE__*/React.createElement(AutoSizer, {\n      key: \"infinite\",\n      disableHeight: true\n    }, ({\n      width\n    }) => /*#__PURE__*/React.createElement(\"div\", null, \"tree\"))];\n  }\n\n  _formatter(rowData, columnIndex) {\n    const {\n      columns\n    } = this.state;\n    const {\n      id,\n      type\n    } = columns[columnIndex];\n    const v = rowData[id];\n\n    switch (control_by_type(type, v)) {\n      case 'ocombo':\n        return this.props._mgr.value_mgr(rowData, id, type, false, v).get(v).presentation;\n\n      case 'dhxCalendar':\n        return $p.utils.moment(v).format($p.utils.moment._masks.date);\n\n      case 'calck':\n        return v;\n\n      default:\n        return v ? v.toString() : '';\n    }\n  }\n\n}\n\nDataTree.COLUMN_DEFAULT_WIDTH = 220;\nDataTree.propTypes = {\n  // данные\n  _mgr: PropTypes.object.isRequired,\n  // Менеджер данных\n  _acl: PropTypes.string,\n  // Права на чтение-изменение\n  _meta: PropTypes.object,\n  // Описание метаданных. Если не указано, используем метаданные менеджера\n  _ref: PropTypes.string,\n  // Ссылка, на которую надо спозиционироваться\n  _owner: PropTypes.object,\n  // Поле - владелец. У него должны быть _obj, _fld и _meta\n  // а внутри _meta могут быть choice_params и choice_links\n  // настройки внешнего вида и поведения\n  selectionMode: PropTypes.bool,\n  // Режим выбора из списка. Если истина - дополнительно рисуем кнопку выбора\n  read_only: PropTypes.object,\n  // Элемент только для чтения\n  denyAddDel: PropTypes.bool,\n  // Запрет добавления и удаления строк (скрывает кнопки в панели, отключает обработчики)\n  show_search: PropTypes.bool,\n  // Показывать поле поиска\n  show_variants: PropTypes.bool,\n  // Показывать список вариантов настройки динсписка\n  modal: PropTypes.bool,\n  // Показывать список в модальном диалоге\n  // Redux actions\n  handlers: PropTypes.object.isRequired // обработчики редактирования объекта\n\n};\nexport default withStyles(withIface(DataTree));","import DataList from './DataTree';\nexport default DataList;"],"sourceRoot":""}