(this.webpackJsonpwindowbuilder=this.webpackJsonpwindowbuilder||[]).push([[21],{1038:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(159),o=a(85),l=a(586),r=a(166),d=a(74);var c=Object(d.a)(e=>({entered:{minHeight:120},secondary:{marginTop:-e.spacing(1.5)},groupTitle:{fontWeight:"bold"},listitem:{paddingTop:e.spacing(),paddingBottom:e.spacing()}})),h=a(34);var m=Object(h.compose)(c,Object(r.connect)((function(e,t){return{handleCalck:()=>Promise.resolve(),handleCancel(){t.handlers.handleIfaceState({component:"DataObjPage",name:"dialog",value:null})}}})));class u extends n.Component{constructor(e,t){super(e,t),this.handleOk=()=>{const{data:e,obj:t,meta:a,fake_obj:n,props:{dialog:i}}=this,s={items:a.obj.items.find(e=>e.cond_value===n.individual_legal),has(e,t){return t||(t=this.items),!t||(t.items&&(t=t.items),t.some(t=>t.fld===e||(t.items?this.has(e,t.items):void 0)))}};for(var o in a.fields)if(a.fields[o].mandatory&&!n[o]&&s.has(o))return void this.setState({msg:{title:$p.msg.mandatory_title,text:$p.msg.mandatory_field.replace("%1",a.fields[o].synonym)}});t[i.cmd]=e.join(" "),this.handleCancel()},this.handleErrClose=()=>{this.setState({msg:null})};const{handleCancel:a,handleCalck:n,dialog:{ref:i,cmd:s,_mgr:o}}=e;this.handleCancel=a.bind(this),this.handleCalck=n.bind(this),this.obj=o.by_ref[i];const l=this.meta=o.metadata().form[s],r=this.data=this.obj[s].split(" "),d=Object.keys(l.fields);this.fake_obj={_metadata:e=>e?l.fields[e]:l,get _manager(){return o}};const{utils:c}=$p;for(const e of d)this.fake_obj.__define(e,{get:()=>c.fetch_type(r[d.indexOf(e)],l.fields[e]),set(t){r[d.indexOf(e)]=t}});this.state={_obj:this.fake_obj,_meta:l,msg:null}}handleValueChange(e){return(t,a)=>{const{state:{_obj:n}}=this;n[e]=a||(t&&t.target?t.target.value:""),this.forceUpdate()}}render(){const{handleCancel:e,handleOk:t,handleErrClose:a,meta:n,state:{msg:r}}=this;return i.a.createElement(o.a,{open:!0,initFullScreen:!0,large:!0,title:"Реквизиты клиента",onClose:e,actions:[i.a.createElement(s.a,{key:"ok",onClick:t,color:"primary"},"Записать и закрыть"),i.a.createElement(s.a,{key:"cancel",onClick:e,color:"primary"},"Закрыть")]},l.b.call(this,n.obj.items),r&&i.a.createElement(o.a,{open:!0,title:r.title,onClose:a,actions:[i.a.createElement(s.a,{key:"ok",onClick:a,color:"primary"},"Ок")]},r.text||r))}}var p=m(u);t.default=p},545:function(e,t,a){"use strict";var n=a(12);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(0)),s=(0,n(a(13)).default)(i.default.createElement("path",{d:"M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3zm-3 11H8v-5h8v5zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm-1-9H6v4h12V3z"}),"Print");t.default=s},552:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));a(0);var n=a(1),i=a.n(n),s=a(121);class o extends s.a{shouldComponentUpdate({_mgr:e,_meta:t,title:a,handleIfaceState:n}){let i=!0;const{props:s,ltitle:o,context:l}=this;return s._mgr!==e&&this.handleManagerChange&&(this.handleManagerChange({_mgr:e,_meta:t}),i=!1),l.dnr||!o||a==o||s.ignoreTitle||(n&&n({component:"",name:"title",value:o}),i=!1),i}get sizes(){let{context:{dnr:e},props:{width:t,height:a},state:{columns:n}}=this;return a||(a=e&&parseInt(e.frameRect.height)-2),(!a||a<320)&&(a=320),t||(t=e&&parseInt(e.frameRect.width)),(!t||t<480)&&(t=480),{width:t,height:a,columnsWidth:n?n.reduce((e,t)=>e+t._width,0):t}}}o.contextTypes={dnr:i.a.object,customComponents:i.a.object}}}]);
//# sourceMappingURL=21.b57d1672.chunk.js.map